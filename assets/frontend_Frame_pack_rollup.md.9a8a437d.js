import{_ as s,c as n,o as a,a as l}from"./app.a8c3c3b7.js";const p="/assets/image-20221207212020770.5f543e8e.png",o="/assets/image-20221207232615783.2cfc547d.png",e="/assets/image-20221208000123082.e517fc95.png",r="/assets/image-20221208002818632.805c7167.png",c="/assets/image-20221208003721045.f3feec0c.png",t="/assets/image-20221208181730338.4bc0f1f0.png",D="/assets/image-20221209213737053.5f8f4da1.png",y="/assets/image-20221209213816182.4e103162.png",E=JSON.parse('{"title":"","description":"","frontmatter":{"author":"PengPeng","date":"2022-12-10"},"headers":[{"level":3,"title":"\u4E00\u3001\u5FEB\u901F\u4E0A\u624B","slug":"\u4E00\u3001\u5FEB\u901F\u4E0A\u624B","link":"#\u4E00\u3001\u5FEB\u901F\u4E0A\u624B","children":[]},{"level":3,"title":"\u4E8C\u3001\u914D\u7F6E\u6587\u4EF6","slug":"\u4E8C\u3001\u914D\u7F6E\u6587\u4EF6","link":"#\u4E8C\u3001\u914D\u7F6E\u6587\u4EF6","children":[]},{"level":3,"title":"\u4E09\u3001\u540E\u7EED\u8BA1\u5212","slug":"\u4E09\u3001\u540E\u7EED\u8BA1\u5212","link":"#\u4E09\u3001\u540E\u7EED\u8BA1\u5212","children":[]}],"relativePath":"frontend/Frame/pack/rollup.md","lastUpdated":null}'),F={name:"frontend/Frame/pack/rollup.md"},i=l(`<h3 id="\u4E00\u3001\u5FEB\u901F\u4E0A\u624B" tabindex="-1">\u4E00\u3001\u5FEB\u901F\u4E0A\u624B <a class="header-anchor" href="#\u4E00\u3001\u5FEB\u901F\u4E0A\u624B" aria-hidden="true">#</a></h3><blockquote><p>rollup \u662F\u4E00\u4E2A JavaScript \u6A21\u5757\u6253\u5305\u5DE5\u5177\uFF0C\u53EF\u4EE5\u5C06\u591A\u4E2A\u5C0F\u7684\u4EE3\u7801\u7247\u6BB5\u7F16\u8BD1\u4E3A\u5B8C\u6574\u7684\u5E93\u548C\u5E94\u7528\u3002Rollup \u4F7F\u7528\u7684\u662F ES6 \u7248\u672C Javascript \u4E2D\u7684\u6A21\u5757\u6807\u51C6\u3002\u9664\u4E86\u80FD\u591F\u8BA9\u4F60\u4F7F\u7528\u6807\u51C6\u7684 ES \u6A21\u5757\uFF0CRollup \u8FD8\u53EF\u4EE5\u5BF9\u6240\u7528\u7684\u4EE3\u7801\u8FDB\u884C\u9759\u6001\u5206\u6790\uFF0C\u5E76\u5C06\u672A\u5B9E\u9645\u7528\u5230\u7684\u4EE3\u7801\u5254\u9664</p></blockquote><p>rollup\u53EF\u4EE5\u6253\u516D\u79CD\u5305\u683C\u5F0F\uFF1A</p><ul><li><p><code>amd</code> - \u5F02\u6B65\u6A21\u5757\u5B9A\u4E49\uFF0C\u9002\u7528\u4E8E RequireJS \u7B49\u6A21\u5757\u52A0\u8F7D\u5668</p></li><li><p><code>cjs</code> - CommonJS\uFF0C\u9002\u7528\u4E8E Node \u73AF\u5883\u548C\u5176\u4ED6\u6253\u5305\u5DE5\u5177\uFF08\u522B\u540D\uFF1A<code>commonjs</code>\uFF09</p></li><li><p><code>es</code> - \u5C06 bundle \u4FDD\u7559\u4E3A ES \u6A21\u5757\u6587\u4EF6\uFF0C\u9002\u7528\u4E8E\u5176\u4ED6\u6253\u5305\u5DE5\u5177\u4EE5\u53CA\u652F\u6301 <code>&lt;script type=module&gt;</code> \u6807\u7B7E\u7684\u6D4F\u89C8\u5668\uFF08\u522B\u540D: <code>esm</code>\uFF0C<code>module</code>\uFF09</p></li><li><p><code>iife</code> - \u81EA\u6267\u884C\u51FD\u6570\uFF0C\u9002\u7528\u4E8E <code>&lt;script&gt;</code> \u6807\u7B7E\u3002\uFF08\u5982\u679C\u4F60\u8981\u4E3A\u4F60\u7684\u5E94\u7528\u521B\u5EFA bundle\uFF0C\u90A3\u4E48\u4F60\u5F88\u53EF\u80FD\u7528\u5B83\u3002\uFF09</p></li><li><p><code>umd</code> - \u901A\u7528\u6A21\u5757\u5B9A\u4E49\uFF0C\u751F\u6210\u7684\u5305\u540C\u65F6\u652F\u6301 <code>amd</code>\u3001<code>cjs</code> \u548C <code>iife</code> \u4E09\u79CD\u683C\u5F0F</p></li><li><p><code>system</code> - SystemJS \u6A21\u5757\u52A0\u8F7D\u5668\u7684\u539F\u751F\u683C\u5F0F\uFF08\u522B\u540D: <code>systemjs</code>\uFF09\uFF0C\u51FA\u540D\u7684 <code>Angular</code> \u7528\u7684\u5C31\u662F\u5B83\u3002</p></li><li><p>\u5B89\u88C5\u4F9D\u8D56</p><div class="language-sh line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki"><code><span class="line"><span style="color:#A6ACCD;">pnpm init //\u5728\u4E00\u4E2Ademo\u6839\u76EE\u5F55\u4E0B\u5148\u521D\u59CB\u5316\u4E00\u4E2Apackage.json</span></span>
<span class="line"><span style="color:#A6ACCD;">pnpm install  --global rollup // \u5168\u5C40\u5B89\u88C5 \u5982\u679C\u4F7F\u7528\u5176\u4ED6\u5DE5\u5177\u6BD4\u5982npm\uFF0Cyarn,\u53EF\u4EE5\u81EA\u884C\u4F7F\u7528</span></span>
<span class="line"><span style="color:#A6ACCD;">pnpm install rollup -D //\u5C40\u90E8\u5B89\u88C5</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><blockquote><p>\u5907\u6CE8\uFF1A\u6211\u81EA\u5DF1\u662F\u4E60\u60EF\u7528<strong>pnpm</strong>\u7BA1\u7406\u4F9D\u8D56\uFF0C\u5982\u679C\u5305\u7BA1\u7406\u5DE5\u5177\u4E0D\u4E00\u6837\uFF0C\u53EF\u4EE5\u81EA\u884C\u4F7F\u7528\u81EA\u5DF1\u4E60\u60EF\u7684\u5305\u7BA1\u7406\u5DE5\u5177</p></blockquote></li></ul><p>\u8FD9\u91CC\u6211\u91C7\u7528\u5C40\u90E8\u5B89\u88C5\u7684\u65B9\u5F0F\uFF0C\u7136\u540E\u65B0\u5EFA\u4E00\u4E2Ademo\uFF0C\u5982\u4E0B\uFF1A</p><div class="language-javascript line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki"><code><span class="line"><span style="color:#676E95;">//msg.js</span></span>
<span class="line"><span style="color:#89DDFF;">export</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">default</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">firstRollup</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">hi,this is my first rollup</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><div class="language-javascript line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki"><code><span class="line"><span style="color:#676E95;">//logger.js</span></span>
<span class="line"><span style="color:#89DDFF;">export</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> testLog </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;">msg</span><span style="color:#C792EA;">=&gt;</span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#A6ACCD;">console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">testLog----</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;">msg</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">export</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> testLog2 </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;">msg</span><span style="color:#C792EA;">=&gt;</span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#A6ACCD;">console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">testLog2----</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;">msg</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><div class="language-javascript line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki"><code><span class="line"><span style="color:#676E95;">//index.js</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;">//\u5BFC\u5165\u6A21\u5757\u58F0\u660E</span></span>
<span class="line"><span style="color:#89DDFF;">import</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">testLog</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">from</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">./logger</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">import</span><span style="color:#A6ACCD;"> msg </span><span style="color:#89DDFF;">from</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">./msg</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;">//\u4F7F\u7528\u6A21\u5757 </span></span>
<span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> msg </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> msg</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">firstRollup</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color:#82AAFF;">testLog</span><span style="color:#A6ACCD;">(msg)</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><p>\u6700\u540E\u6587\u4EF6\u76EE\u5F55\u5982\u4E0B\uFF1A</p><p><img src="`+p+`" alt="image-20221207212020770"></p><p>\u5982\u679C\u50CF\u6211\u4E00\u6837\u662F\u5C40\u90E8\u5B89\u88C5\u7684\uFF0C\u8FD9\u4E2A\u65F6\u5019\u5728\u9879\u76EE\u6839\u76EE\u5F55\u4E0B</p><p>\u5728\u547D\u4EE4\u7EC8\u7AEF\u4E2D\u8FD0\u884C</p><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki"><code><span class="line"><span style="color:#A6ACCD;">pnpm rollup ./src/index.js </span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>\u4F1A\u770B\u5230\u7EC8\u7AEF\u6253\u5370\uFF1A</p><div class="language-javascript line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki"><code><span class="line"><span style="color:#89DDFF;">./</span><span style="color:#A6ACCD;">src</span><span style="color:#89DDFF;">/</span><span style="color:#A6ACCD;">index</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">js \u2192 stdout</span><span style="color:#89DDFF;">...</span></span>
<span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> testLog </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;">msg</span><span style="color:#C792EA;">=&gt;</span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#A6ACCD;">console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">testLog----</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;">msg</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">};</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C792EA;">var</span><span style="color:#A6ACCD;"> msg </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">firstRollup</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">hi,this is my first rollup</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#89DDFF;">};</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;">//\u5BFC\u5165\u6A21\u5757\u58F0\u660E</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;">//\u4F7F\u7528\u6A21\u5757 </span></span>
<span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> firstRollup </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> msg</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">firstRollup</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#82AAFF;">testLog</span><span style="color:#A6ACCD;">(firstRollup)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><p>\u6211\u4EEC\u8FD8\u53EF\u4EE5\u6307\u5B9A\u8F6C\u5316\u683C\u5F0F(\u6BD4\u5982\u7ACB\u5373\u6267\u884C\u51FD\u6570)</p><div class="language-javascript line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki"><code><span class="line"><span style="color:#A6ACCD;"> pnpm rollup </span><span style="color:#89DDFF;">./</span><span style="color:#A6ACCD;">src</span><span style="color:#89DDFF;">/</span><span style="color:#A6ACCD;">index</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">js </span><span style="color:#89DDFF;">--</span><span style="color:#A6ACCD;">format iife</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>\u7ED3\u679C\u5982\u4E0B\uFF1A</p><div class="language-javascript line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki"><code><span class="line"><span style="color:#A6ACCD;">(</span><span style="color:#C792EA;">function</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">use strict</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#C792EA;">const</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">testLog</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">msg</span><span style="color:#C792EA;">=&gt;</span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#A6ACCD;">console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">testLog----</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;">msg</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">};</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#C792EA;">var</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">msg</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">      firstRollup</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">hi,this is my first rollup</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">};</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">  </span><span style="color:#676E95;">//\u5BFC\u5165\u6A21\u5757\u58F0\u660E</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">  </span><span style="color:#676E95;">//\u4F7F\u7528\u6A21\u5757 </span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#C792EA;">const</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">firstRollup</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">msg</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">firstRollup</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#82AAFF;">testLog</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">firstRollup</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;">)()</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br></div></div><h3 id="\u4E8C\u3001\u914D\u7F6E\u6587\u4EF6" tabindex="-1">\u4E8C\u3001\u914D\u7F6E\u6587\u4EF6 <a class="header-anchor" href="#\u4E8C\u3001\u914D\u7F6E\u6587\u4EF6" aria-hidden="true">#</a></h3><blockquote><p>\u5982\u679C\u6211\u4EEC\u9700\u8981\u5F88\u591A\u914D\u7F6E\uFF0C\u4F7F\u7528\u547D\u4EE4\u884C\u4F1A\u663E\u5F97\u5F88\u4E0D\u65B9\u4FBF\uFF0C\u6211\u4EEC\u53EF\u4EE5\u521B\u5EFA\u4E00\u4E2A\u914D\u7F6E\u6587\u4EF6\uFF0C\u5B83\u5305\u542B\u4E86\u6240\u6709\u6211\u4EEC\u60F3\u8981\u7684\u53EF\u9009\u9879\u3002</p></blockquote><h4 id="_2-1\u521B\u5EFA\u914D\u7F6E\u6587\u4EF6" tabindex="-1">2.1\u521B\u5EFA\u914D\u7F6E\u6587\u4EF6 <a class="header-anchor" href="#_2-1\u521B\u5EFA\u914D\u7F6E\u6587\u4EF6" aria-hidden="true">#</a></h4><p>\u6211\u4EEC\u5728\u6839\u76EE\u5F55\u4E0B\u521B\u5EFA\u547D\u540D\u4E3A <code>rollup.config.js</code>\u7684\u6587\u4EF6</p><div class="language-javascript line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki"><code><span class="line"><span style="color:#89DDFF;">export</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">default</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">input</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">src/index.js</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">output</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">file</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">dist/bundle.js</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">format</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">cjs</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">};</span></span>
<span class="line"><span style="color:#676E95;">//\u76F8\u5F53\u4E8E\u547D\u4EE4 rollup src/index.js -o bundle.js -f cjs</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>\u547D\u4EE4\u7EC8\u7AEF\u8FD0\u884C\uFF1A</p><div class="language-shell line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki"><code><span class="line"><span style="color:#676E95;"># \u5C06\u81EA\u5B9A\u4E49\u914D\u7F6E\u6587\u4EF6\u7684\u8DEF\u5F84\u4F20\u7ED9 Rollup</span></span>
<span class="line"><span style="color:#A6ACCD;">pnpm   rollup --config rollup.config.js</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;"># \u5982\u679C\u4F60\u4E0D\u4F20\u6587\u4EF6\u540D, Rollup \u5C06\u4F1A\u5C1D\u8BD5</span></span>
<span class="line"><span style="color:#676E95;"># \u6309\u7167\u4EE5\u4E0B\u987A\u5E8F\u52A0\u8F7D\u914D\u7F6E\u6587\u4EF6\uFF1A</span></span>
<span class="line"><span style="color:#676E95;"># rollup.config.mjs -&gt; rollup.config.cjs -&gt; rollup.config.js</span></span>
<span class="line"><span style="color:#A6ACCD;">pnpm  rollup --config</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>\u4F1A\u770B\u5230\u62A5\u9519\u540C\u65F6\u4E5F\u8BF4\u660E\u8BA9\u6211\u4EEC\u600E\u4E48\u89E3\u51B3\uFF1A</p><div class="language-shell line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki"><code><span class="line"><span style="color:#89DDFF;">[!]</span><span style="color:#A6ACCD;"> RollupError: Node tried to load your configuration file as CommonJS even though it is likely an ES module. To resolve this, change the extension of your configuration to </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">.mjs</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;">, </span><span style="color:#82AAFF;">set</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">type</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;">: </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">module</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">in</span><span style="color:#A6ACCD;"> your package.json file or pass the </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">--bundleConfigAsCjs</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> flag.</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><strong>\u8FD9\u91CC\u9762\u6211\u5C06\u6587\u4EF6\u540E\u7F00\u6539\u6210.mjs</strong></p><p>\u7136\u540E\u6211\u4EEC\u5728\u7EC8\u7AEF\u8FD0\u884C\uFF1A</p><div class="language-javascript line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki"><code><span class="line"><span style="color:#A6ACCD;">pnpm  rollup </span><span style="color:#89DDFF;">--</span><span style="color:#A6ACCD;">c </span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>\u6210\u529F\u4E4B\u540E\u6211\u4EEC\u53EF\u4EE5\u53D1\u73B0\u6839\u76EE\u5F55\u4E0B\u591A\u4E86\u6253\u5305\u6587\u4EF6\uFF1A<code>dist/bundle.js</code></p><h4 id="_2-2-\u5173\u4E8E-es\u548Ccjs" tabindex="-1">2.2 \u5173\u4E8E ES\u548CCJS <a class="header-anchor" href="#_2-2-\u5173\u4E8E-es\u548Ccjs" aria-hidden="true">#</a></h4><blockquote><p>ECMAScript 6 (<code>ES6</code>) \u5F15\u5165\u4E86 <code>ES Modules</code> \u89C4\u8303\uFF0C\u63D0\u4F9B\u4E86\u5728 JavaScript \u4E2D\u5B9E\u73B0\u6A21\u5757\u7684\u6807\u51C6\u3002</p><p>\u622A\u81F3 2022 \u5E74\uFF0C\u6240\u6709\u4E3B\u8981\u7684 Web \u6D4F\u89C8\u5668\u90FD\u652F\u6301 ES \u6A21\u5757\u3002</p><p><a href="http://gonwe.cn/index.php/go/aHR0cHM6Ly9ub2RlanMub3JnL2RvY3MvbGF0ZXN0L2FwaS9lc20uaHRtbA" target="_blank" rel="noreferrer">ECMAScript \u6A21\u5757\u7CFB\u7EDF</a>\uFF08\u4F7F\u7528<code>import</code>\u548C<code>export</code>\uFF09\u5DF2\u7ECF\u6210\u4E3A\u6807\u51C6\uFF0C\u5E76\u4E14 Node.js \u589E\u52A0\u4E86\u5BF9\u5B83\u7684\u652F\u6301\u3002</p><p>\u7136\u800C\uFF0C\u6A21\u5757\u5316 JavaScript \u7684\u6D41\u884C\u65E9\u4E8E ES6\u3002</p><p>Node.js \u662F\u4E00\u79CD JavaScript \u8FD0\u884C\u65F6\u73AF\u5883\uFF0C\u4F7F\u7528 <a href="http://gonwe.cn/index.php/go/aHR0cHM6Ly9ub2RlanMub3JnL2RvY3MvbGF0ZXN0L2FwaS9tb2R1bGVzLmh0bWw" target="_blank" rel="noreferrer">CommonJs</a>\uFF08\u4F7F\u7528<code>require</code>\u548C<code>module.exports</code>\uFF09\u4F5C\u4E3A\u6A21\u5757\u89C4\u8303\u3002</p><p>\u73B0\u6709\u7684\u5F88\u591A\u5E94\u7528\u90FD\u662F\u7528 CommonJS \u6784\u5EFA\u7684\uFF0C\u6240\u4EE5Node.js\u5728\u6DFB\u52A0\u5BF9 <strong>\u539F\u751FES\u6A21\u5757</strong> \u7684\u652F\u6301\u65F6\uFF0C\u9887\u6709\u4E89\u8BAE\u5730\u5F15\u5165\u4E86<code>MJS</code>\u6587\u4EF6\u6269\u5C55\u540D\u6765\u533A\u5206\u4E24\u8005\uFF0C<strong>\u9632\u6B62\u5E94\u7528\u5D29\u6E83</strong>\u3002</p><p>Node.js \u4F1A\u5C06<code>.cjs</code>\u6587\u4EF6\u89C6\u4E3A <strong>CommonJS \u6A21\u5757</strong>\uFF0C\u5C06<code>.mjs</code>\u6587\u4EF6\u89C6\u4E3A <strong>ECMAScript \u6A21\u5757</strong>\u3002</p><p>\u5B83\u4F1A\u5C06<code>.js</code>\u6587\u4EF6\u89C6\u4E3A\u9879\u76EE\u7684 <strong>\u9ED8\u8BA4\u6A21\u5757\u7CFB\u7EDF</strong>\uFF0C.js\u7684\u672C\u673A\u6A21\u5757\u7CFB\u7EDF\u662FCommonJs\u3002\uFF08\u9664\u975E<em>package.json</em>\u8BF4\u7684 <code>&quot;type&quot;: &quot;module&quot;,</code>\uFF09\u3002</p><p>\u7B80\u800C\u8A00\u4E4B\uFF0C\u5B83\u662F\u7528\u4E8E Node.js \u533A\u5206 CommonJS \uFF08<code>.js</code>\uFF09\u548C ES6\u6A21\u5757\u6587\u4EF6\uFF08<code>.mjs</code>\uFF09\u3002</p><p>\u6240\u4EE5 \u5F53node\u7248\u672C\u5927\u4E8E13\u65F6\uFF0C\u9ED8\u8BA4\u662F\u4EE5ES Module\u65B9\u5F0F\uFF0C\u6240\u4EE5\u8981\u7ED9\u4E86\u63D0\u793A\uFF0C\u8981\u4E48\u5728package.json\u6587\u4EF6\u4E2D\u52A0\u5165type: module\uFF0C\u8981\u4E48\u628A\u914D\u7F6E\u6587\u4EF6\u7684\u540E\u7F00\u540D\u6539\u6210rollup.config.mjs\u3002</p></blockquote><p><a href="https://es6.ruanyifeng.com/#docs/module-loader#Node-js-%E7%9A%84%E6%A8%A1%E5%9D%97%E5%8A%A0%E8%BD%BD%E6%96%B9%E6%B3%95" target="_blank" rel="noreferrer">Node-js-\u7684\u6A21\u5757\u52A0\u8F7D\u65B9\u6CD5</a></p><ul><li><p>commonjs</p></li><li><p>.cjs \u7ED3\u5C3E\u7684\u6587\u4EF6\u4EE5 commonjs \u89C4\u8303\u89E3\u6790\u3002.cjs \u7ED3\u5C3E\u7684\u6587\u4EF6\u53EA\u80FD\u7528 commonjs \u89C4\u8303\u3002</p><ul><li>package.json \u4E2D type \u9ED8\u8BA4\u4E3A commonjs\uFF0C\u8868\u793A\u5F53\u524D\u9879\u76EE\u4E2D\u4EE5js \u7ED3\u5C3E\u7684\u6587\u4EF6\u4EE5 commonjs \u89C4\u8303\u6267\u884C</li></ul></li><li><p>esmodule</p><ul><li><code>.mjs</code> \u7ED3\u5C3E\u7684\u6587\u4EF6\u4EE5 esmodule \u89C4\u8303\u89E3\u6790\u3002.mjs \u7ED3\u5C3E\u7684\u6587\u4EF6\u53EA\u80FD\u7528 esmodule \u89C4\u8303\u3002</li><li>\u8BBE\u7F6E package.json \u4E2D type =&quot;module&quot;\u65F6\uFF0C</li></ul></li></ul><h4 id="_2-3-\u914D\u7F6E\u6587\u4EF6\u4F7F\u7528" tabindex="-1">2.3 \u914D\u7F6E\u6587\u4EF6\u4F7F\u7528 <a class="header-anchor" href="#_2-3-\u914D\u7F6E\u6587\u4EF6\u4F7F\u7528" aria-hidden="true">#</a></h4><h5 id="_2-3-1-\u4F7F\u7528\u63D2\u4EF6" tabindex="-1">2.3.1 \u4F7F\u7528\u63D2\u4EF6 <a class="header-anchor" href="#_2-3-1-\u4F7F\u7528\u63D2\u4EF6" aria-hidden="true">#</a></h5><p>\u6BD4\u5982\u4F7F\u7528\u6211\u4EEC\u8981\u4F7F\u7528json\u63D2\u4EF6<code>@rollup/plugin-json</code></p><ul><li>\u4E0B\u8F7D\u4F9D\u8D56</li></ul><div class="language-javascript line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki"><code><span class="line"><span style="color:#A6ACCD;">pnpm install </span><span style="color:#89DDFF;">--</span><span style="color:#A6ACCD;">save</span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;">dev </span><span style="color:#89DDFF;">@</span><span style="color:#A6ACCD;">rollup</span><span style="color:#89DDFF;">/</span><span style="color:#A6ACCD;">plugin</span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;">json</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><ul><li><p>\u914D\u7F6E\u63D2\u4EF6</p><div class="language-javascript line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki"><code><span class="line"><span style="color:#676E95;">// rollup.config.mjs</span></span>
<span class="line"><span style="color:#89DDFF;">import</span><span style="color:#A6ACCD;"> json </span><span style="color:#89DDFF;">from</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">@rollup/plugin-json</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">export</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">default</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">input</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">src/index.js</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">output</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#F07178;">file</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">dist/bundle.js</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#F07178;">format</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">cjs</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">},</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">plugins</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> [ </span><span style="color:#82AAFF;">json</span><span style="color:#A6ACCD;">() ]</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">};</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><ul><li>\u4F7F\u7528\u63D2\u4EF6</li></ul></li></ul><p>\u200B \u5728<code>src</code>\u4E0B\u65B0\u5EFA<code>json.js</code></p><div class="language-javascript line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki"><code><span class="line"><span style="color:#676E95;">// src/main.js</span></span>
<span class="line"><span style="color:#89DDFF;">import</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">version</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">from</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">../package.json</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">export</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">default</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">function</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#A6ACCD;">console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">version </span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">+</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">version</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><ul><li><code>index.js</code>\u5F15\u7528</li></ul><div class="language-javascript line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki"><code><span class="line"><span style="color:#676E95;">//\u5BFC\u5165\u6A21\u5757\u58F0\u660E</span></span>
<span class="line"><span style="color:#89DDFF;">import</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">testLog</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">from</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">./logger</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">import</span><span style="color:#A6ACCD;"> versionFun </span><span style="color:#89DDFF;">from</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">./json.js</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#89DDFF;">import</span><span style="color:#A6ACCD;"> msg </span><span style="color:#89DDFF;">from</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">./msg</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;">//\u4F7F\u7528\u6A21\u5757 </span></span>
<span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> firstRollup </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> msg</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">firstRollup</span></span>
<span class="line"></span>
<span class="line"><span style="color:#82AAFF;">versionFun</span><span style="color:#A6ACCD;">()</span></span>
<span class="line"></span>
<span class="line"><span style="color:#82AAFF;">testLog</span><span style="color:#A6ACCD;">(firstRollup)</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><p>\u8FD0\u884C <code>pnpm rollup --c </code>,\u4F1A\u770B\u5230\u751F\u6210\u7684<code>dist/bundle.js</code></p><div class="language-javascript line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki"><code><span class="line"><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">use strict</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> testLog </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;">msg</span><span style="color:#C792EA;">=&gt;</span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#A6ACCD;">console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">testLog----</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;">msg</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">};</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C792EA;">var</span><span style="color:#A6ACCD;"> version </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">1.0.0</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;">// src/main.js</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C792EA;">function</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">versionFun</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#A6ACCD;">console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">version </span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">+</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">version</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C792EA;">var</span><span style="color:#A6ACCD;"> msg </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">firstRollup</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">hi,this is my first rollup</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#89DDFF;">};</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;">//\u5BFC\u5165\u6A21\u5757\u58F0\u660E</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;">//\u4F7F\u7528\u6A21\u5757 </span></span>
<span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> firstRollup </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> msg</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">firstRollup</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#82AAFF;">versionFun</span><span style="color:#A6ACCD;">()</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#82AAFF;">testLog</span><span style="color:#A6ACCD;">(firstRollup)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br></div></div><h5 id="_2-3-2-\u52A0\u8F7Dnpm\u6A21\u5757" tabindex="-1">2.3.2 \u52A0\u8F7Dnpm\u6A21\u5757 <a class="header-anchor" href="#_2-3-2-\u52A0\u8F7Dnpm\u6A21\u5757" aria-hidden="true">#</a></h5><ul><li><p>\u4E0B\u8F7D\u4F9D\u8D56</p><div class="language- line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki"><code><span class="line"><span style="color:#A6ACCD;">pnpm install --save-dev @rollup/plugin-node-resolve</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>\u7136\u540E\u6211\u4EEC\u5728\u4E0B\u8F7D\u4E00\u4E2A\u7B2C\u4E09\u65B9\u6A21\u5757<code>lodash-es</code></p><div class="language-shell line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki"><code><span class="line"><span style="color:#A6ACCD;">pnpm install --save-dev lodash-es</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><ul><li><p>\u7F16\u5199\u8C03\u7528 rollup.config.mjs</p><div class="language-javascript line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki"><code><span class="line"><span style="color:#676E95;">// rollup.config.mjs</span></span>
<span class="line"><span style="color:#89DDFF;">import</span><span style="color:#A6ACCD;"> json </span><span style="color:#89DDFF;">from</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">@rollup/plugin-json</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#676E95;">// rollup.config.js</span></span>
<span class="line"><span style="color:#89DDFF;">import</span><span style="color:#A6ACCD;"> resolve </span><span style="color:#89DDFF;">from</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">@rollup/plugin-node-resolve</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">export</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">default</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">input</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">src/index.js</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">output</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#F07178;">file</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">dist/bundle.js</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#F07178;">format</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">cjs</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">},</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">plugins</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> [</span></span>
<span class="line"><span style="color:#A6ACCD;">       </span><span style="color:#82AAFF;">json</span><span style="color:#A6ACCD;">()</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#82AAFF;">resolve</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">      </span><span style="color:#676E95;">// \u5C06\u81EA\u5B9A\u4E49\u9009\u9879\u4F20\u9012\u7ED9\u89E3\u6790\u63D2\u4EF6</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#F07178;">customResolveOptions</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#F07178;">moduleDirectory</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">node_modules</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;">) ]</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">};</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div><ul><li>\u8C03\u7528<code>lodash-es</code></li></ul></li></ul></li></ul><div class="language-javascript line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki"><code><span class="line"><span style="color:#676E95;">//\u5BFC\u5165\u6A21\u5757\u58F0\u660E</span></span>
<span class="line"><span style="color:#89DDFF;">import</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">testLog</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">from</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">./logger</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">import</span><span style="color:#A6ACCD;"> versionFun </span><span style="color:#89DDFF;">from</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">./json.js</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#89DDFF;">import</span><span style="color:#A6ACCD;"> msg </span><span style="color:#89DDFF;">from</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">./msg</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">import</span><span style="color:#A6ACCD;"> _ </span><span style="color:#89DDFF;">from</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">lodash-es</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;">//\u4F7F\u7528\u6A21\u5757 </span></span>
<span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> firstRollup </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> msg</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">firstRollup</span></span>
<span class="line"></span>
<span class="line"><span style="color:#82AAFF;">versionFun</span><span style="color:#A6ACCD;">()</span></span>
<span class="line"></span>
<span class="line"><span style="color:#82AAFF;">testLog</span><span style="color:#A6ACCD;">(firstRollup)</span></span>
<span class="line"><span style="color:#82AAFF;">testLog</span><span style="color:#A6ACCD;">(_</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">camelCase</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">hi,rollup</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;">))</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><p>\u8FD0\u884C <code>pnpm rollup --c </code>,\u4F1A\u770B\u5230\u751F\u6210\u7684<code>dist/bundle.js</code>\u5C06loadsh\u4E5F\u6253\u5305\u8FDB\u53BB\u4E86\u3002</p><p><img src="`+o+`" alt="image-20221207232615783"></p><p>\u5047\u5982\u6211\u4EEC\u60F3\u8BA9<code>lodash</code> \u73B0\u5728\u4F1A\u88AB\u89C6\u4E3A\u5916\u90E8\u5F15\u5165\uFF0C\u800C\u4E0D\u4F1A\u548C\u6211\u4EEC\u7684\u5E93\u6253\u5305\u5728\u4E00\u8D77\u3002</p><p>\u53EF\u4EE5\u901A\u8FC7<code> external</code></p><div class="language-javascript line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki"><code><span class="line"><span style="color:#676E95;">// rollup.config.mjs</span></span>
<span class="line"><span style="color:#89DDFF;">import</span><span style="color:#A6ACCD;"> json </span><span style="color:#89DDFF;">from</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">@rollup/plugin-json</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">import</span><span style="color:#A6ACCD;"> resolve </span><span style="color:#89DDFF;">from</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">@rollup/plugin-node-resolve</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">export</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">default</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">input</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">src/index.js</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">output</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#F07178;">file</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">dist/bundle.js</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#F07178;">format</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">cjs</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">},</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">plugins</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> [</span></span>
<span class="line"><span style="color:#A6ACCD;">       </span><span style="color:#82AAFF;">json</span><span style="color:#A6ACCD;">()</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#82AAFF;">resolve</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">      </span><span style="color:#676E95;">// \u5C06\u81EA\u5B9A\u4E49\u9009\u9879\u4F20\u9012\u7ED9\u89E3\u6790\u63D2\u4EF6</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#F07178;">customResolveOptions</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#F07178;">moduleDirectory</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">node_modules</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;">) ]</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;">// \u6307\u51FA\u54EA\u4E9B\u6A21\u5757\u9700\u8981\u88AB\u89C6\u4E3A\u5916\u90E8\u5F15\u5165</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">external</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> [</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">lodash-es</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">]</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">};</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br></div></div><p>\u5728\u91CD\u65B0\u6253\u5305\u4E4B\u540E\u6211\u4EEC\u4F1A\u53D1\u73B0\u751F\u6210dist/bundle.js\uFF0C\u4F1A\u5F15\u7528<code>lodash-es</code>,\u800C\u4E0D\u662F\u5728\u6253\u5305\u8FDB\u53BB\u4E86\uFF1A</p><div class="language-javascript line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki"><code><span class="line"><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">use strict</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C792EA;">var</span><span style="color:#A6ACCD;"> _ </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">require</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">lodash-es</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> testLog </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;">msg</span><span style="color:#C792EA;">=&gt;</span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#A6ACCD;">console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">testLog----</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;">msg</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">};</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C792EA;">var</span><span style="color:#A6ACCD;"> version </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">1.0.0</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;">// src/main.js</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C792EA;">function</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">versionFun</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#A6ACCD;">console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">version </span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">+</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">version</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C792EA;">var</span><span style="color:#A6ACCD;"> msg </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">firstRollup</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">hi,this is my first rollup</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#89DDFF;">};</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;">//\u5BFC\u5165\u6A21\u5757\u58F0\u660E</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;">//\u4F7F\u7528\u6A21\u5757 </span></span>
<span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> firstRollup </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> msg</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">firstRollup</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#82AAFF;">versionFun</span><span style="color:#A6ACCD;">()</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#82AAFF;">testLog</span><span style="color:#A6ACCD;">(firstRollup)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#82AAFF;">testLog</span><span style="color:#A6ACCD;">(_</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">camelCase</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">hi,rollup</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;">))</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br></div></div><h5 id="_2-3-3-\u52A0\u8F7Dcommonjs\u6A21\u5757" tabindex="-1">2.3.3 \u52A0\u8F7DCommonJS\u6A21\u5757 <a class="header-anchor" href="#_2-3-3-\u52A0\u8F7Dcommonjs\u6A21\u5757" aria-hidden="true">#</a></h5><blockquote><p>\uFF0C\u5927\u591A\u6570\u7684 NPM \u5305\u66B4\u9732\u7684\u90FD\u662F CommonJS \u6A21\u5757\u3002\u5728\u6B64\u66F4\u6539\u4E4B\u524D\uFF0C\u6211\u4EEC\u9700\u8981\u5C06 CommonJS \u8F6C\u6362\u4E3A ES2015\uFF0C\u8FD9\u6837 Rollup \u624D\u80FD\u5904\u7406\u5B83\u4EEC\u3002</p></blockquote><ul><li><p>\u5B89\u88C5\u63D2\u4EF6<code>@rollup/plugin-commonjs </code></p><p>\u5E94\u8BE5\u5728\u5176\u4ED6\u63D2\u4EF6 <em>\u4E4B\u524D</em> \u4F7F\u7528\u2014\u2014\u8FD9\u662F\u4E3A\u4E86\u9632\u6B62\u5176\u4ED6\u63D2\u4EF6\u8FDB\u884C\u7684\u66F4\u6539\u7834\u574F\u4E86 CommonJS \u68C0\u6D4B)\uFF1A</p></li></ul><div class="language-javascript line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki"><code><span class="line"><span style="color:#A6ACCD;">pnpm install install </span><span style="color:#89DDFF;">--</span><span style="color:#A6ACCD;">save</span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;">dev </span><span style="color:#89DDFF;">@</span><span style="color:#A6ACCD;">rollup</span><span style="color:#89DDFF;">/</span><span style="color:#A6ACCD;">plugin</span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;">commonjs</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><ul><li><code>rollup.config.mjs</code>\u5F15\u5165</li></ul><div class="language-javascript line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki"><code><span class="line"><span style="color:#676E95;">// rollup.config.mjs</span></span>
<span class="line"><span style="color:#89DDFF;">import</span><span style="color:#A6ACCD;"> json </span><span style="color:#89DDFF;">from</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">@rollup/plugin-json</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">import</span><span style="color:#A6ACCD;"> resolve </span><span style="color:#89DDFF;">from</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">@rollup/plugin-node-resolve</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">import</span><span style="color:#A6ACCD;"> commonjs </span><span style="color:#89DDFF;">from</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">@rollup/plugin-commonjs </span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">export</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">default</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">input</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">src/index.js</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">output</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#F07178;">file</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">dist/bundle.js</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#F07178;">format</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">cjs</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">},</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">plugins</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> [</span></span>
<span class="line"><span style="color:#A6ACCD;">       </span><span style="color:#82AAFF;">commonjs</span><span style="color:#A6ACCD;">()</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">       </span><span style="color:#82AAFF;">json</span><span style="color:#A6ACCD;">()</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#82AAFF;">resolve</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">      </span><span style="color:#676E95;">// \u5C06\u81EA\u5B9A\u4E49\u9009\u9879\u4F20\u9012\u7ED9\u89E3\u6790\u63D2\u4EF6\uFF0C\u53EF\u9009\u9879</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#F07178;">customResolveOptions</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#F07178;">moduleDirectory</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">node_modules</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">   ]</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;">// \u6307\u51FA\u54EA\u4E9B\u6A21\u5757\u9700\u8981\u88AB\u89C6\u4E3A\u5916\u90E8\u5F15\u5165</span></span>
<span class="line"><span style="color:#A6ACCD;">  	</span><span style="color:#F07178;">external</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> [</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">lodash-es</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">]</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">};</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br></div></div><ul><li>\u65B0\u5EFA\u4E00\u4E2A <code>cjs-module.js</code></li></ul><div class="language-javascript line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki"><code><span class="line"><span style="color:#89DDFF;">module.exports</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">test</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">001</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><ul><li><p>\u5F15\u7528\u4E0A\u9762\u6587\u4EF6</p><div class="language-javascript line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki"><code><span class="line"><span style="color:#676E95;">//\u5BFC\u5165\u6A21\u5757\u58F0\u660E</span></span>
<span class="line"><span style="color:#89DDFF;">import</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">testLog</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">from</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">./logger</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">import</span><span style="color:#A6ACCD;"> cjsModule </span><span style="color:#89DDFF;">from</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">./cjs-module</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">...</span></span>
<span class="line"><span style="color:#82AAFF;">testLog</span><span style="color:#A6ACCD;">(cjsModule)</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div></li></ul><p>\u5728\u91CD\u65B0\u6253\u5305\u4E4B\u540E\u6211\u4EEC\u4F1A\u53D1\u73B0\u751F\u6210dist/bundle.js\uFF0C\u5F15\u7528\u7684<code>cjsModule</code>\u4F1A\u88AB\u6253\u5305\u6210\u4E00\u4E2A\u5BF9\u8C61</p><div class="language-javascript line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki"><code><span class="line"><span style="color:#89DDFF;">...</span></span>
<span class="line"><span style="color:#C792EA;">var</span><span style="color:#A6ACCD;"> cjsModule </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">test</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">001</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#89DDFF;">};</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">...</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h5 id="_2-3-4-\u4EE3\u7801\u62C6\u5206" tabindex="-1">2.3.4 \u4EE3\u7801\u62C6\u5206 <a class="header-anchor" href="#_2-3-4-\u4EE3\u7801\u62C6\u5206" aria-hidden="true">#</a></h5><blockquote><p>\u4F7F\u7528 <a href="https://github.com/tc39/proposal-dynamic-import#import" target="_blank" rel="noreferrer">\u52A8\u6001\u5BFC\u5165 API</a> \u5BFC\u5165\u6A21\u5757\u3002\u53EF\u4EE5\u5F88\u597D\u5206\u5272\u4EE3\u7801</p></blockquote><p>\u5C06<code>src/index.js</code>\u6539\u6210\u4E0B\u9762</p><div class="language-javascript line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki"><code><span class="line"><span style="color:#676E95;">//\u52A8\u6001\u5BFC\u5165</span></span>
<span class="line"><span style="color:#89DDFF;">import</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">./logger</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">then</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">({</span><span style="color:#A6ACCD;">testLog</span><span style="color:#89DDFF;">})</span><span style="color:#C792EA;">=&gt;</span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#82AAFF;">testLog</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">hello,rollup</span><span style="color:#89DDFF;">&quot;</span><span style="color:#F07178;">)</span></span>
<span class="line"><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>\u6539\u5199<code>rollup.config.mjs</code>,\u591A\u4E2A\u6587\u4EF6\u751F\u6210\u7684\u8BDD\uFF0C<code>output</code>\u7684\u7528<code>dir</code>\u66FF\u6362<code>file</code>\u4E86</p><div class="language-javascript line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki"><code><span class="line"></span>
<span class="line"><span style="color:#89DDFF;">export</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">default</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">input</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">src/index.js</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">output</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">      </span><span style="color:#676E95;">//file: &#39;bundle.js&#39;,</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#F07178;">dir</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">dist</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#F07178;">format</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">cjs</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">},</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">...</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">};</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p>\u8FD0\u884C\u6253\u5305\u547D\u4EE4\u4E4B\u540E\uFF0C\u6211\u4EEC\u4F1A\u770B\u5230dist\u6587\u4EF6\u4E0B\u4F1A\u51FA\u73B0\u4E24\u4E2A\u6587\u4EF6\uFF1A</p><p><img src="`+e+`" alt="image-20221208000123082"></p><h5 id="_2-3-5-\u591A\u5165\u53E3\u6253\u5305" tabindex="-1">2.3.5 \u591A\u5165\u53E3\u6253\u5305 <a class="header-anchor" href="#_2-3-5-\u591A\u5165\u53E3\u6253\u5305" aria-hidden="true">#</a></h5><p><code>index.js</code>\u4EE3\u7801\u8FD8\u539F\u6210\uFF1A</p><div class="language-javascript line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki"><code><span class="line"><span style="color:#676E95;">//\u5BFC\u5165\u6A21\u5757\u58F0\u660E</span></span>
<span class="line"><span style="color:#89DDFF;">import</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">testLog</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">from</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">./logger</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">import</span><span style="color:#A6ACCD;"> versionFun </span><span style="color:#89DDFF;">from</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">./json.js</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#89DDFF;">import</span><span style="color:#A6ACCD;"> msg </span><span style="color:#89DDFF;">from</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">./msg</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#89DDFF;">import</span><span style="color:#A6ACCD;"> cjsModule </span><span style="color:#89DDFF;">from</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">./cjs-module</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">import</span><span style="color:#A6ACCD;"> _ </span><span style="color:#89DDFF;">from</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">lodash-es</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;">//\u4F7F\u7528\u6A21\u5757 </span></span>
<span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> firstRollup </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> msg</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">firstRollup</span></span>
<span class="line"></span>
<span class="line"><span style="color:#82AAFF;">versionFun</span><span style="color:#A6ACCD;">()</span></span>
<span class="line"></span>
<span class="line"><span style="color:#82AAFF;">testLog</span><span style="color:#A6ACCD;">(firstRollup)</span></span>
<span class="line"><span style="color:#82AAFF;">testLog</span><span style="color:#A6ACCD;">(_</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">camelCase</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">hi,rollup</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;">))</span></span>
<span class="line"><span style="color:#82AAFF;">testLog</span><span style="color:#A6ACCD;">(cjsModule)</span></span>
<span class="line"><span style="color:#676E95;">//\u52A8\u6001\u5BFC\u5165</span></span>
<span class="line"><span style="color:#676E95;">// import(&quot;./logger&quot;).then(({testLog})=&gt;{</span></span>
<span class="line"><span style="color:#676E95;">//     testLog(&quot;hello,rollup&quot;)</span></span>
<span class="line"><span style="color:#676E95;">// })</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br></div></div><p>\u914D\u7F6E<code>rollup.config.mjs</code></p><div class="language-javascript line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki"><code><span class="line"><span style="color:#676E95;">// rollup.config.mjs</span></span>
<span class="line"><span style="color:#89DDFF;">import</span><span style="color:#A6ACCD;"> json </span><span style="color:#89DDFF;">from</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">@rollup/plugin-json</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">import</span><span style="color:#A6ACCD;"> resolve </span><span style="color:#89DDFF;">from</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">@rollup/plugin-node-resolve</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">import</span><span style="color:#A6ACCD;"> commonjs </span><span style="color:#89DDFF;">from</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">@rollup/plugin-commonjs</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">export</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">default</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;">//input: [&#39;src/index.js&#39;,&quot;src/logger.js&quot;],\u53EF\u4EE5\u6570\u7EC4\u4E5F\u53EF\u4EE5\u5BF9\u8C61</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">input</span><span style="color:#89DDFF;">:{</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#F07178;">test1</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">src/index.js</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#F07178;">test2</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">src/logger.js</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">},</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">output</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">      </span><span style="color:#676E95;">//file: &#39;bundle.js&#39;,</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#F07178;">dir</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">dist</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#F07178;">format</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">cjs</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">},</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">plugins</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> [</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#82AAFF;">commonjs</span><span style="color:#A6ACCD;">()</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#82AAFF;">json</span><span style="color:#A6ACCD;">()</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#82AAFF;">resolve</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">      </span><span style="color:#676E95;">// \u5C06\u81EA\u5B9A\u4E49\u9009\u9879\u4F20\u9012\u7ED9\u89E3\u6790\u63D2\u4EF6\uFF0C\u53EF\u9009\u9879</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#F07178;">customResolveOptions</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#F07178;">moduleDirectory</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">node_modules</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">   </span></span>
<span class="line"><span style="color:#A6ACCD;">   ]</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;">// \u6307\u51FA\u54EA\u4E9B\u6A21\u5757\u9700\u8981\u88AB\u89C6\u4E3A\u5916\u90E8\u5F15\u5165</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">external</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> [</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">lodash-es</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">]</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">};</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br></div></div><p>\u4F1A\u53D1\u73B0dist\u4E0B\u751F\u6210\u4E86\u4E24\u4E2A\u6587\u4EF6\uFF0C\u5E76\u4E14\u4EE3\u7801\u4F1A\u81EA\u52A8\u62C6\u5206\u5F00\u6765,<code>test1</code>\u91CC\u9762\u4F1A\u5F15\u7528<code>test2.js</code>\uFF1A</p><p><img src="`+r+`" alt="image-20221208002818632"></p><ul><li><p>\u6211\u4EEC\u4E5F\u53EF\u4EE5\u6570\u7EC4\u914D\u7F6E\u6784\u5EFA\u591A\u4E2Abundle\uFF0C</p><div class="language-javascript line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki"><code><span class="line"><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">export</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">default</span><span style="color:#A6ACCD;"> [</span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">input</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">src/index.js</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">output</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#F07178;">file</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">dist2/bundle-a.js</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#F07178;">format</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">cjs</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">},</span></span>
<span class="line"><span style="color:#A6ACCD;">     </span><span style="color:#F07178;">plugins</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> [</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#82AAFF;">commonjs</span><span style="color:#A6ACCD;">()</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#82AAFF;">json</span><span style="color:#A6ACCD;">()</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#82AAFF;">resolve</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">      </span><span style="color:#676E95;">// \u5C06\u81EA\u5B9A\u4E49\u9009\u9879\u4F20\u9012\u7ED9\u89E3\u6790\u63D2\u4EF6\uFF0C\u53EF\u9009\u9879</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#F07178;">customResolveOptions</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#F07178;">moduleDirectory</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">node_modules</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">   </span></span>
<span class="line"><span style="color:#A6ACCD;">   ]</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">external</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> [</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">lodash-es</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">]</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">},</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">input</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">src/logger.js</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">output</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> [</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#F07178;">file</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">dist2/bundle-bcjs.js</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#F07178;">format</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">cjs</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#89DDFF;">},</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#F07178;">file</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">dist2/bundle-bes.js</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#F07178;">format</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">es</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#89DDFF;">},</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#F07178;">file</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">dist2/bundle-bumd.js</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#F07178;">format</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">umd</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#89DDFF;">        </span><span style="color:#676E95;">//umd\u5FC5\u987B\u6307\u5B9A\u4E00\u4E2Aname</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#F07178;">name</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">umdName</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#A6ACCD;">    ]</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;">]</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br></div></div></li></ul><p>\u8FD0\u884C\u6253\u5305\u547D\u4EE4\u540E\uFF0C\u6211\u4EEC\u770B\u5230<code>dist2</code>\u6587\u4EF6\u4E0B\uFF1A</p><p><img src="`+c+`" alt="image-20221208003721045"></p><p>\u8FD9\u4E2A\u65F6\u5019\u6211\u4EEC\u4F1A\u53D1\u73B0 <code>bundle-a.js</code>\u5E76\u672A\u548C\u5171\u7528<code>logger.js</code>\u751F\u6210\u540E\u7684js\uFF0C\u800C\u662F\u76F4\u63A5\u5C06<code>logger.js</code>\u76F4\u63A5\u6253\u5305\u8FDB\u53BB\u3002\u6570\u7EC4\u914D\u7F6E\u65B9\u5F0F\u4E0D\u4F1A\u51FA\u73B0\u4EE3\u7801\u62C6\u5206\u7684\u60C5\u51B5\u3002</p><h4 id="_2-4\u96C6\u6210babel" tabindex="-1">2.4\u96C6\u6210Babel <a class="header-anchor" href="#_2-4\u96C6\u6210babel" aria-hidden="true">#</a></h4><blockquote><p>Babel\u662F\u4E00\u4E2A\u5DE5\u5177\u96C6\uFF0C\u4E3B\u8981\u7528\u4E8E\u5C06ES6\u7248\u672C\u7684JavaScript\u4EE3\u7801\u8F6C\u4E3AES5\u7B49\u5411\u540E\u517C\u5BB9\u7684JS\u4EE3\u7801\uFF0C\u4ECE\u800C\u53EF\u4EE5\u8FD0\u884C\u5728\u4F4E\u7248\u672C\u6D4F\u89C8\u5668\u6216\u5176\u5B83\u73AF\u5883\u4E2D\u3002</p></blockquote><h5 id="_2-4-1-\u4F9D\u8D56\u7684\u57FA\u7840\u5305" tabindex="-1">2.4.1 \u4F9D\u8D56\u7684\u57FA\u7840\u5305 <a class="header-anchor" href="#_2-4-1-\u4F9D\u8D56\u7684\u57FA\u7840\u5305" aria-hidden="true">#</a></h5><ul><li><p>@rollup/plugin-babel(Rollup\u63D2\u4EF6\u7528\u4E8ERollup\u548CBabel\u4E4B\u95F4\u7684\u65E0\u7F1D\u96C6\u6210)</p></li><li><p>@babel/core( Babel\u7F16\u8BD1\u5668\u6838\u5FC3\u3002 )</p></li><li><p><code>@babel/preset-env</code></p><blockquote><p>\u5B98\u65B9\u8BF4\u660E\uFF1A@babel/preset-env is a smart preset that allows you to use the latest JavaScript without needing to micromanage which syntax transforms (and optionally, browser polyfills) are needed by your target environment(s). This both makes your life easier and JavaScript bundles smaller!</p><p>\u63D0\u4F9B\u4E86ES6\u8F6C\u6362ES5\u7684\u8BED\u6CD5\u8F6C\u6362\u89C4\u5219\uFF0C\u8FDB\u884C\u8BED\u6CD5\u8F6C\u6362\uFF0C\u8BE5\u9884\u8BBE\u8FD8\u53EF\u4EE5\u901A\u8FC7\u8BBE\u7F6E\u53C2\u6570\u9879\u8FDB\u884C\u9488\u5BF9\u6027\u8BED\u6CD5\u8F6C\u6362\u4EE5\u53CApolyfill\u7684\u90E8\u5206\u5F15\u5165\u3002</p></blockquote></li></ul><p>\u5B89\u88C5\u4E0A\u8FF0\u4F9D\u8D56:</p><div class="language-shell line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki"><code><span class="line"><span style="color:#A6ACCD;"> pnpm install @rollup/plugin-babel @babel/core @babel/preset-env --save-dev</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>src\u6587\u4EF6\u4E0B\u65B0\u5EFA\u4E09\u4E2A\u6D4B\u8BD5\u6587\u4EF6\uFF1A</p><div class="language-javascript line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki"><code><span class="line"><span style="color:#676E95;">//babelClassTest.js</span></span>
<span class="line"><span style="color:#89DDFF;">export</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">default</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">class</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">Person1</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">sayname</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">      </span><span style="color:#89DDFF;">return</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">name</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><div class="language-javascript line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki"><code><span class="line"><span style="color:#676E95;">//babeltest.js</span></span>
<span class="line"><span style="color:#89DDFF;">import</span><span style="color:#A6ACCD;"> Person </span><span style="color:#89DDFF;">from</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">./babelClassTest.js</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> str </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">()</span><span style="color:#C792EA;">=&gt;</span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#A6ACCD;">console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">\u7BAD\u5934\u51FD\u6570</span><span style="color:#89DDFF;">&quot;</span><span style="color:#F07178;">)</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#82AAFF;">str</span><span style="color:#A6ACCD;">()</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> person </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">new</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">Person</span><span style="color:#A6ACCD;">()</span></span>
<span class="line"><span style="color:#A6ACCD;">console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#A6ACCD;">(person)</span></span>
<span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> promise </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">Promise</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">resolve</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">ok</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#A6ACCD;">(promise)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><div class="language-java line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki"><code><span class="line"><span style="color:#676E95;">//src/babeltest2.js</span></span>
<span class="line"><span style="color:#F78C6C;">import</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">Person from &quot;</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">/babelClassTest</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">js&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C792EA;">const str = ()=&gt;{</span></span>
<span class="line"><span style="color:#C792EA;">    console</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">log(&quot;\u7BAD\u5934\u51FD\u6570&quot;)</span></span>
<span class="line"><span style="color:#C792EA;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C792EA;">str()</span></span>
<span class="line"><span style="color:#C792EA;">const john = new Person()</span></span>
<span class="line"><span style="color:#C792EA;">console</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">log(john)</span></span>
<span class="line"><span style="color:#C792EA;">  </span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><p>\u65B0\u5EFA\u4E00\u4E2A<code>rollup.babel.config.mjs</code></p><div class="language-javascript line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki"><code><span class="line"><span style="color:#89DDFF;">import</span><span style="color:#A6ACCD;"> babel</span><span style="color:#89DDFF;">,{</span><span style="color:#A6ACCD;">getBabelOutputPlugin</span><span style="color:#89DDFF;">}</span><span style="color:#89DDFF;">from</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">@rollup/plugin-babel</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">import</span><span style="color:#A6ACCD;"> resolve </span><span style="color:#89DDFF;">from</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">@rollup/plugin-node-resolve</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> config </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">input</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> [</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">src/babeltest.js</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">src/babeltest2.js</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">]</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">output</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">dir</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">output</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">format</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">es</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">},</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">plugins</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> [</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#82AAFF;">resolve</span><span style="color:#A6ACCD;">()</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#82AAFF;">babel</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">{</span><span style="color:#A6ACCD;"> </span><span style="color:#F07178;">babelHelpers</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">bundled</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#82AAFF;">getBabelOutputPlugin</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">        </span><span style="color:#676E95;">// modules \u8BBE\u7F6E\u4E3A false\uFF0C\u5426\u5219 Babel \u5C06\u5728 Rollup \u6709\u673A\u4F1A\u6267\u884C\u5176\u64CD\u4F5C\u4E4B\u524D\u5C06\u6211\u4EEC\u7684\u6A21\u5757\u8F6C\u6362\u4E3A CommonJS </span></span>
<span class="line"><span style="color:#89DDFF;">      </span><span style="color:#676E95;">//presets\u4E5F\u53EF\u4EE5\u653E\u5230babel\u914D\u7F6E\u6587\u4EF6\u5982\u5728src\u4E0B\u5EFA\u7ACB .babelrc.json\u6587\u4EF6\uFF0C\u5C06\u4E0B\u9762\u4E1C\u897F\u4E22\u8FDB\u53BB\u3002</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#F07178;">presets</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> [[</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">@babel/preset-env</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span><span style="color:#89DDFF;">&quot;</span><span style="color:#F07178;">modules</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FF9CAC;">false</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span></span>
<span class="line"><span style="color:#89DDFF;">        </span><span style="color:#676E95;">//targets\uFF0C\u914D\u7F6E\u9700\u8981\u517C\u5BB9\u6D4F\u89C8\u5668\u8303\u56F4,\u6BD4\u5982chrome 60\u5DF2\u7ECF\u652F\u6301es6\u4E86\uFF0C\u5982\u679C\u914D\u7F6E\u4E86\uFF0C\u5219\u4E0D\u4F1A\u5C06\u6211\u4EEC\u7684es6\u8BED\u6CD5\u8F6C\u6362\u6210es5\u4E86\u3002</span></span>
<span class="line"><span style="color:#89DDFF;">        </span><span style="color:#676E95;">// targets: {</span></span>
<span class="line"><span style="color:#89DDFF;">        </span><span style="color:#676E95;">//     &quot;chrome&quot;: &quot;60&quot;</span></span>
<span class="line"><span style="color:#89DDFF;">        </span><span style="color:#676E95;">//   }</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#A6ACCD;">        ]]</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;">)</span></span>
<span class="line"><span style="color:#A6ACCD;">]</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;">  </span></span>
<span class="line"><span style="color:#89DDFF;">};</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">export</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">default</span><span style="color:#A6ACCD;"> config</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br></div></div><ul><li><p><code>@babel/preset-env</code>\u4E2D\u7684 modules\`</p><ul><li><p>modules \u8BBE\u7F6E\u4E3A false\uFF0C\u5426\u5219 Babel \u5C06\u5728 Rollup \u6709\u673A\u4F1A\u6267\u884C\u5176\u64CD\u4F5C\u4E4B\u524D\u5C06\u6211\u4EEC\u7684\u6A21\u5757\u8F6C\u6362\u4E3A CommonJS</p></li><li><p>\u8FD9\u4E2A\u53C2\u6570\u9879\u7684\u53D6\u503C\u53EF\u4EE5\u662F&quot;amd&quot;\u3001&quot;umd&quot; \u3001 &quot;systemjs&quot; \u3001 &quot;commonjs&quot; \u3001&quot;cjs&quot; \u3001&quot;auto&quot; \u3001false\u3002\u5728\u4E0D\u8BBE\u7F6E\u7684\u65F6\u5019\uFF0C\u53D6\u9ED8\u8BA4\u503C&quot;auto&quot;\u3002</p></li><li><p>\u5982\u679C\u6211\u4EEC\u5C06\u53C2\u6570\u9879\u6539\u6210false\uFF0C\u90A3\u4E48\u5C31\u4E0D\u4F1A\u5BF9ES6\u6A21\u5757\u5316\u8FDB\u884C\u66F4\u6539\uFF0C\u8FD8\u662F\u4F7F\u7528import\u5F15\u5165\u6A21\u5757\u3002</p></li></ul><p>\u200B \u4F7F\u7528ES6\u6A21\u5757\u5316\u8BED\u6CD5\u6709\u4EC0\u4E48\u597D\u5904\u5462\u3002\u5728\u4F7F\u7528Webpack\u4E00\u7C7B\u7684\u6253\u5305\u5DE5\u5177\uFF0C\u53EF\u4EE5\u8FDB\u884C\u9759\u6001\u5206\u6790\uFF0C\u4ECE\u800C\u53EF\u4EE5\u505Atree shaking \u7B49\u4F18\u5316\u63AA\u65BD\u3002</p></li><li><p>\u5173\u4E8E<code>@rollup/plugin-babel</code>\u7684<code>babelHelpers</code></p><p>babelHelpers</p><p>Type: &#39;bundled&#39; | &#39;runtime&#39; | &#39;inline&#39; | &#39;external&#39; Default: &#39;bundled&#39;</p><ul><li><p>\u201Cruntime\u201D-\u5C24\u5176\u662F\u5728\u4F7F\u7528Rollup\u6784\u5EFA\u5E93\u65F6\uFF0C\u5E94\u4F7F\u7528\u6B64\u9009\u9879\u3002\u5B83\u5FC5\u987B\u4E0E@babel/plugin-transform\u8FD0\u884C\u65F6\u7ED3\u5408\u4F7F\u7528\uFF0C\u60A8\u8FD8\u5E94\u8BE5\u5C06@babel/runtime\u6307\u5B9A\u4E3A\u5305\u7684\u4F9D\u8D56\u9879\u3002\u4E0D\u8981\u5FD8\u8BB0\u544A\u8BC9Rollup\uFF0C\u5728\u7ED1\u5B9A<code>cjs</code>&amp;<code>es</code>\u683C\u5F0F\u65F6\uFF0C\u5C06\u4ECE@babel/runtime\u6A21\u5757\u4E2D\u5BFC\u5165\u7684\u52A9\u624B\u89C6\u4E3A\u5916\u90E8\u4F9D\u8D56\u9879\u3002\u8FD9\u53EF\u4EE5\u901A\u8FC7\u6B63\u5219\u8868\u8FBE\u5F0F\uFF08external:[/@babel/runtime/]\uFF09\u6216\u51FD\u6570\uFF08externat:id=&gt;id.includes\uFF08&#39;@babel/runtime&#39;\uFF09\uFF09\u5B9E\u73B0\u3002\u91CD\u8981\u7684\u662F\u4E0D\u8981\u53EA\u6307\u5B9Aexternal:[&#39;@babel/runtime&#39;]\uFF0C\u56E0\u4E3Ahelpers\u662F\u4ECE\u5D4C\u5957\u8DEF\u5F84\uFF08\u4F8B\u5982@babel/runtime/helpers/get\uFF09\u5BFC\u5165\u7684\uFF0CRollup\u5C06\u53EA\u6392\u9664\u5B8C\u5168\u5339\u914D\u5B57\u7B26\u4E32\u7684\u6A21\u5757\u3002</p></li><li><p>\u201Cbundled\u201D-\u5982\u679C\u60A8\u5E0C\u671B\u751F\u6210\u7684\u6346\u7ED1\u5305\u5305\u542B\u8FD9\u4E9B\u52A9\u624B\uFF08\u6BCF\u4E2A\u52A9\u624B\u6700\u591A\u4E00\u4E2A\u526F\u672C\uFF09\uFF0C\u5219\u5E94\u4F7F\u7528\u6B64\u9009\u9879\u3002\u7279\u522B\u662F\u5728\u6346\u7ED1\u5E94\u7528\u7A0B\u5E8F\u4EE3\u7801\u65F6\u975E\u5E38\u6709\u7528\u3002</p></li><li><p>\u201Cexternal\u201D-\u53EA\u6709\u5F53\u4F60\u77E5\u9053\u81EA\u5DF1\u5728\u505A\u4EC0\u4E48\u65F6\u624D\u4F7F\u7528\u3002\u5B83\u5C06\u5F15\u7528\u5168\u5C40babelHelpers\u5BF9\u8C61\u4E0A\u7684helpers \u3002\u4E0E<code>@babel/plugin-external-helpers</code>\u7ED3\u5408\u4F7F\u7528\u3002</p></li><li><p>\u201Cinline\u201D-\u4E0D\u5EFA\u8BAE\u8FD9\u6837\u505A\u3002\u4F7F\u7528\u6B64\u9009\u9879\uFF0C\u5C06\u5728\u6BCF\u4E2A\u6587\u4EF6\u4E2D\u63D2\u5165\u5E2E\u52A9\u7A0B\u5E8F\u3002\u8FD9\u53EF\u80FD\u4F1A\u5BFC\u81F4\u4E25\u91CD\u7684\u4EE3\u7801\u91CD\u590D\u3002\u8FD9\u662F\u9ED8\u8BA4\u7684Babel\u884C\u4E3A\uFF0C\u56E0\u4E3ABabel\u5BF9\u5B64\u7ACB\u7684\u6587\u4EF6\u8FDB\u884C\u64CD\u4F5C-\u7136\u800C\uFF0C\u7531\u4E8ERollup\u662F\u4E00\u4E2Abundler\uFF0C\u5E76\u4E14\u5177\u6709\u9879\u76EE\u610F\u8BC6\uFF08\u56E0\u6B64\u53EF\u80FD\u8DE8\u591A\u4E2A\u8F93\u5165\u6587\u4EF6\u8FDB\u884C\u64CD\u4F5C\uFF09\uFF0C\u56E0\u6B64\u8BE5\u63D2\u4EF6\u7684\u9ED8\u8BA4\u8BBE\u7F6E\u4E3A\u201Cbundled\u201D\u3002</p></li></ul></li></ul><p>\u8FD0\u884C <code>pnpm rollup --c rollup.babel.config.mjs</code>,\u6211\u4EEC\u4F1A\u53D1\u73B0\u9664\u4E86<code>Promise</code>\u51FD\u6570\u4E4B\u5916\uFF0C\u5176\u4ED6\u7684\u90FD\u5DF2\u7ECF\u88AB\u8F6C\u6210 <code>es5</code>\u8BED\u6CD5\u4E86\u3002</p><p><img src="`+t+`" alt="image-20221208181730338"></p><h5 id="_2-4-2-\u5F15\u5165polyfill" tabindex="-1">2.4.2 \u5F15\u5165polyfill <a class="header-anchor" href="#_2-4-2-\u5F15\u5165polyfill" aria-hidden="true">#</a></h5><p>\u6211\u4EEC\u5728\u8FDB\u884C \u4E0A\u9762\u53EA\u662F\u5BF9\u65B0\u7684\u8BED\u6CD5\u8FDB\u884C\u4E86\u8F6C\u5316\uFF0C\u5E76\u6CA1\u6709\u5BF9\u65B0\u7684API\u8FDB\u884C\u53D8\u52A8\u3002</p><blockquote><p>\u56E0\u4E3ABabel\u9ED8\u8BA4\u53EA\u8F6C\u6362\u65B0\u7684JavaScript\u8BED\u6CD5\uFF08syntax\uFF09\uFF0C\u800C\u4E0D\u8F6C\u6362\u65B0\u7684 API\u3002</p><p>\u65B0\u7684API\u5206\u7C7B\u4E24\u7C7B\uFF0C\u4E00\u7C7B\u662FPromise\u3001Map\u3001Symbol\u3001Proxy\u3001Iterator\u7B49\u5168\u5C40\u5BF9\u8C61\u53CA\u5176\u5BF9\u8C61\u81EA\u8EAB\u7684\u65B9\u6CD5\uFF0C\u4F8B\u5982Object.assign\uFF0CPromise.resolve\uFF1B\u53E6\u4E00\u7C7B\u662F\u65B0\u7684\u5B9E\u4F8B\u65B9\u6CD5\uFF0C\u4F8B\u5982\u6570\u7EC4\u5B9E\u4F8B\u65B9\u6CD5[1, 4, -5, 10].find((item) =&gt; item &lt; 0)</p><p>\u5982\u679C\u60F3\u8BA9ES6\u65B0\u7684API\u5728\u4F4E\u7248\u672C\u6D4F\u89C8\u5668\u6B63\u5E38\u8FD0\u884C\uFF0C\u6211\u4EEC\u5C31\u4E0D\u80FD\u53EA\u505A\u8BED\u6CD5\u8F6C\u6362\u3002</p><p>\u5728\u524D\u7AEFweb\u5DE5\u7A0B\u91CC\uFF0C\u6700\u5E38\u89C4\u7684\u505A\u6CD5\u662F\u4F7F\u7528polyfill\uFF0C\u4E3A\u5F53\u524D\u73AF\u5883\u63D0\u4F9B\u4E00\u4E2A\u57AB\u7247\u3002\u6240\u8C13\u57AB\u7247\uFF0C\u662F\u6307\u57AB\u5E73\u4E0D\u540C\u6D4F\u89C8\u5668\u4E4B\u95F4\u5DEE\u5F02\u7684\u4E1C\u897F\u3002polyfill\u63D0\u4F9B\u4E86\u5168\u5C40\u7684ES6\u5BF9\u8C61\u4EE5\u53CA\u901A\u8FC7\u4FEE\u6539\u539F\u578B\u94FEArray.prototype\u7B49\u5B9E\u73B0\u5BF9\u5B9E\u4F8B\u7684\u5B9E\u73B0\u3002</p><p>\u4ECEbabel7.4\u5F00\u59CB\uFF0C\u5B98\u65B9\u4E0D\u63A8\u8350\u518D\u4F7F\u7528@babel/polyfill\u4E86\uFF0C\u56E0\u4E3A@babel/polyfill\u672C\u8EAB\u5176\u5B9E\u5C31\u662F\u4E24\u4E2Anpm\u5305\u7684\u96C6\u5408\uFF1Acore-js\u4E0Eregenerator-runtime\u3002</p></blockquote><p>\u603B\u4F53\u6765\u8BF4\uFF0CBabel\u5B98\u65B9\u7684polyfill\u4F7F\u7528\u65B9\u6CD5\u4E3B\u8981\u6709\u5982\u4E0B\u51E0\u79CD\uFF1A</p><ol><li><p>\u76F4\u63A5\u5728html\u6587\u4EF6\u5F15\u5165Babel\u5B98\u65B9\u7684polyfill.js\u811A\u672C\u6587\u4EF6\uFF1B</p></li><li><p>\u5728\u524D\u7AEF\u5DE5\u7A0B\u7684\u5165\u53E3\u6587\u4EF6\u91CC\u5F15\u5165polyfill.js\uFF1B</p></li><li><p>\u5728\u524D\u7AEF\u5DE5\u7A0B\u7684\u5165\u53E3\u6587\u4EF6\u91CC\u5F15\u5165@babel/polyfill\uFF1B</p></li><li><p>\u5728\u524D\u7AEF\u5DE5\u7A0B\u7684\u5165\u53E3\u6587\u4EF6\u91CC\u5F15\u5165core-js/stable\u4E0Eregenerator-runtime/runtime\uFF1B</p></li><li><p>\u5728\u524D\u7AEF\u5DE5\u7A0B\u6784\u5EFA\u5DE5\u5177\u7684\u914D\u7F6E\u6587\u4EF6\u5165\u53E3\u9879\u5F15\u5165polyfill.js\uFF1B</p></li><li><p>\u5728\u524D\u7AEF\u5DE5\u7A0B\u6784\u5EFA\u5DE5\u5177\u7684\u914D\u7F6E\u6587\u4EF6\u5165\u53E3\u9879\u5F15\u5165@babel/polyfill\uFF1B</p></li><li><p>\u5728\u524D\u7AEF\u5DE5\u7A0B\u6784\u5EFA\u5DE5\u5177\u7684\u914D\u7F6E\u6587\u4EF6\u5165\u53E3\u9879\u5F15\u5165core-js/stable\u4E0Eregenerator-runtime/runtime\uFF1B</p><p><a href="https://www.jiangruitao.com/babel/babel-polyfill/" target="_blank" rel="noreferrer">\u53C2\u8003\u6765\u6E90</a></p></li></ol><p>\u5982\u679C\u6211\u4EEC\u9700\u8981\u7684\u8BDD\u8981\u4E0B\u8F7D\u7684\u8BDD\u5EFA\u8BAE\u4E0B\u8F7D\u8FD9\u4E24\u4E2A\u5305\uFF1A</p><div class="language-shell line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki"><code><span class="line"><span style="color:#A6ACCD;">pnpm install core-js regenerator-runtime</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><blockquote><p>regenerator-runtime\u6A21\u5757\u6765\u81EAfacebook\u7684regenerator\u6A21\u5757\u3002</p><p>\u751F\u6210\u5668\u51FD\u6570\u3001<a href="https://so.csdn.net/so/search?q=async&amp;spm=1001.2101.3001.7020" target="_blank" rel="noreferrer">async</a>\u3001await\u51FD\u6570\u7ECFbabel\u7F16\u8BD1\u540E\uFF0Cregenerator-runtime\u6A21\u5757\u7528\u4E8E\u63D0\u4F9B\u529F\u80FD\u5B9E\u73B0\u3002</p></blockquote><p>\u6211\u4EEC\u53EF\u4EE5\u4F7F\u7528 <code>@babel/preset-env</code> \u7684\u5C5E\u6027<code>useBuiltIns</code>\u6765\u63A7\u5236<code>polyfill</code>\u7684\u884C\u4E3A\u6709\u5173\u3002</p><p><strong><a href="https://babeljs.io/docs/en/babel-preset-env.html#usebuiltins" target="_blank" rel="noreferrer">useBuiltIns</a></strong>:</p><p>&quot;usage&quot; | &quot;entry&quot; | false, defaults to false</p><ul><li><p>false</p><blockquote><p>\u8FD9\u79CD\u65B9\u5F0F\u4E0B\uFF0C\u4E0D\u4F1A\u5F15\u5165 polyfills\uFF0C\u4F60\u9700\u8981\u4EBA\u4E3A\u5728\u5165\u53E3\u6587\u4EF6\u5904import &#39;@babel/polyfill&#39;;\u4F46\u5982\u4E0A\u8FD9\u79CD\u65B9\u5F0F\u5728 @babel@7.4 \u4E4B\u540E\u88AB\u5E9F\u5F03\u4E86\uFF0C\u53D6\u800C\u4EE3\u4E4B\u7684\u662F\u5728\u5165\u53E3\u6587\u4EF6\u5904\u81EA\u884C import \u5982\u4E0B\u4EE3\u7801</p></blockquote></li><li><p>usage</p><blockquote><p>\u6211\u4EEC\u5728\u9879\u76EE\u7684\u5165\u53E3\u6587\u4EF6\u5904\u4E0D\u9700\u8981 import \u5BF9\u5E94\u7684 polyfills \u76F8\u5173\u5E93\u3002 babel \u4F1A\u6839\u636E\u7528\u6237\u4EE3\u7801\u7684\u4F7F\u7528\u60C5\u51B5\uFF0C\u5E76\u6839\u636E targets \u81EA\u884C\u6CE8\u5165\u76F8\u5173 polyfills\u3002</p></blockquote></li><li><p>entry</p><blockquote><p>babel \u4F1A\u6839\u636E\u5F53\u524D targets \u63CF\u8FF0\uFF0C\u628A\u9700\u8981\u7684\u6240\u6709\u7684 polyfills \u5168\u90E8\u5F15\u5165\u5230\u4F60\u7684\u5165\u53E3\u6587\u4EF6\uFF08\u6CE8\u610F\u662F\u5168\u90E8\uFF0C\u4E0D\u7BA1\u4F60\u662F\u5426\u6709\u7528\u5230\u9AD8\u7EA7\u7684 API\uFF09.</p><p>\u4F7F\u7528&#39;entry&#39;\u8FD9\u79CD\u65B9\u5F0F\u7684\u65F6\u5019\uFF0C\u53EA\u80FDimport polyfill\u4E00\u6B21\uFF0C\u4E00\u822C\u90FD\u662F\u5728\u5165\u53E3\u6587\u4EF6\u3002\u5982\u679C\u8FDB\u884C\u591A\u6B21import\uFF0C\u4F1A\u53D1\u751F\u9519\u8BEF\u3002</p></blockquote></li><li><p><a href="https://babeljs.io/docs/en/babel-preset-env.html#corejs" target="_blank" rel="noreferrer">corejs</a></p><blockquote><p>\u8BE5\u53C2\u6570\u9879\u7684\u53D6\u503C\u53EF\u4EE5\u662F2\u62163\uFF0C\u6CA1\u6709\u8BBE\u7F6E\u7684\u65F6\u5019\u53D6\u9ED8\u8BA4\u503C\u4E3A2\uFF08\u8FD8\u6709\u4E00\u79CD\u5BF9\u8C61proposals\u53D6\u503C\u65B9\u6CD5\uFF0C\u6211\u4EEC\u5B9E\u9645\u7528\u4E0D\u5230\uFF0C\u5FFD\u7565\u6389\u5373\u53EF\uFF09</p><p>\u8FD9\u4E2A\u53C2\u6570\u9879\u53EA\u6709useBuiltIns\u8BBE\u7F6E\u4E3A&#39;usage&#39;\u6216&#39;entry&#39;\u65F6\uFF0C\u624D\u4F1A\u751F\u6548\u3002</p><p>\u53D6\u9ED8\u8BA4\u503C\u62162\u7684\u65F6\u5019\uFF0CBabel\u8F6C\u7801\u7684\u65F6\u5019\u4F7F\u7528\u7684\u662Fcore-js@2\u7248\u672C\uFF08\u5373core-js2.x.x\uFF09\u3002\u56E0\u4E3A\u67D0\u4E9B\u65B0API\u53EA\u6709core-js@3\u91CC\u624D\u6709\uFF0C\u4F8B\u5982\u6570\u7EC4\u7684flat\u65B9\u6CD5\uFF0C\u6211\u4EEC\u9700\u8981\u4F7F\u7528core-js@3\u7684API\u6A21\u5757\u8FDB\u884C\u8865\u9F50\uFF0C\u8FD9\u4E2A\u65F6\u5019\u6211\u4EEC\u5C31\u628A\u8BE5\u9879\u8BBE\u7F6E\u4E3A3\u3002</p><p>\u9700\u8981\u6CE8\u610F\u7684\u662F\uFF0Ccorejs\u53D6\u503C\u4E3A2\u7684\u65F6\u5019\uFF0C\u9700\u8981\u5B89\u88C5\u5E76\u5F15\u5165core-js@2\u7248\u672C\uFF0C\u6216\u8005\u76F4\u63A5\u5B89\u88C5\u5E76\u5F15\u5165polyfill\u4E5F\u53EF\u4EE5\u3002\u5982\u679Ccorejs\u53D6\u503C\u4E3A3\uFF0C\u5FC5\u987B\u5B89\u88C5\u5E76\u5F15\u5165core-js@3\u7248\u672C\u624D\u53EF\u4EE5\uFF0C</p></blockquote></li></ul><p>\u5047\u5982\u5C06\u4E0A\u9762\u6211\u7684\u914D\u7F6E\u6587\u4EF6<code>rollup.babel.config.mjs</code>\u6DFB\u52A0<code> &quot;useBuiltIns&quot;:&quot;usage&quot;,</code>\u4E4B\u540E\uFF0C</p><div class="language-javascript line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki"><code><span class="line"><span style="color:#89DDFF;">import</span><span style="color:#A6ACCD;"> babel</span><span style="color:#89DDFF;">,{</span><span style="color:#A6ACCD;">getBabelOutputPlugin</span><span style="color:#89DDFF;">}</span><span style="color:#89DDFF;">from</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">@rollup/plugin-babel</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">import</span><span style="color:#A6ACCD;"> resolve </span><span style="color:#89DDFF;">from</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">@rollup/plugin-node-resolve</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> config </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">input</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> [</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">src/babeltest.js</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">src/babeltest2.js</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">]</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">output</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">dir</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">output</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">format</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">es</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">},</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">plugins</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> [</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#82AAFF;">resolve</span><span style="color:#A6ACCD;">()</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#82AAFF;">babel</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">{</span><span style="color:#A6ACCD;"> </span><span style="color:#F07178;">babelHelpers</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">bundled</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#82AAFF;">getBabelOutputPlugin</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">        </span><span style="color:#676E95;">// modules \u8BBE\u7F6E\u4E3A false\uFF0C\u5426\u5219 Babel \u5C06\u5728 Rollup \u6709\u673A\u4F1A\u6267\u884C\u5176\u64CD\u4F5C\u4E4B\u524D\u5C06\u6211\u4EEC\u7684\u6A21\u5757\u8F6C\u6362\u4E3A CommonJS </span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#F07178;">presets</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> [[</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">@babel/preset-env</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">&quot;</span><span style="color:#F07178;">modules</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FF9CAC;">false</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span></span>
<span class="line"><span style="color:#89DDFF;">        </span><span style="color:#676E95;">// usage: \u4F1A\u6839\u636E\u7528\u6237\u4EE3\u7801\u7684\u4F7F\u7528\u60C5\u51B5\uFF0C\u5E76\u6839\u636E targets \u81EA\u884C\u6CE8\u5165\u76F8\u5173 polyfills\u3002</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">&quot;</span><span style="color:#F07178;">useBuiltIns</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">usage</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#89DDFF;">        </span><span style="color:#676E95;">//\u7528 corejs-3\uFF0C\u5F00\u542F proposals: true\uFF0Cproposals \u4E3A\u771F\u90A3\u6837\u6211\u4EEC\u5C31\u53EF\u4EE5\u4F7F\u7528 proposals \u9636\u6BB5\u7684 API \u4E86</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">&quot;</span><span style="color:#F07178;">corejs</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">          </span><span style="color:#89DDFF;">&quot;</span><span style="color:#F07178;">version</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">3</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">          </span><span style="color:#89DDFF;">&quot;</span><span style="color:#F07178;">proposals</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FF9CAC;">true</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">        </span><span style="color:#676E95;">//targets\uFF0C\u914D\u7F6E\u9700\u8981\u517C\u5BB9\u6D4F\u89C8\u5668\u8303\u56F4,\u6BD4\u5982chrome 60\u5DF2\u7ECF\u652F\u6301es6\u4E86\uFF0C\u5982\u679C\u914D\u7F6E\u4E86\uFF0C\u5219\u4E0D\u4F1A\u5C06\u6211\u4EEC\u7684es6\u8BED\u6CD5\u8F6C\u6362\u6210es5\u4E86\u3002</span></span>
<span class="line"><span style="color:#89DDFF;">        </span><span style="color:#676E95;">// targets: {</span></span>
<span class="line"><span style="color:#89DDFF;">        </span><span style="color:#676E95;">//     &quot;chrome&quot;: &quot;60&quot;</span></span>
<span class="line"><span style="color:#89DDFF;">        </span><span style="color:#676E95;">//   }</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#A6ACCD;">        ]]</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;">)</span></span>
<span class="line"><span style="color:#A6ACCD;">]</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br></div></div><p>\u518D\u6B21\u6253\u5305\u4E4B\u540E\u6211\u4EEC\u4F1A\u53D1\u73B0\u6211\u4E4B\u524Djs\u91CC\u9762\u53EA\u662F\u7528\u5230\u4E86<code>promise</code>\uFF0C\u6253\u5305\u4E4B\u540E\u5934\u90E8\u4F1A\u591A\u51FA\u6765\uFF1A</p><div class="language-javascript line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki"><code><span class="line"><span style="color:#89DDFF;">import</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">core-js/modules/es6.object.to-string.js</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">import</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">core-js/modules/es6.promise.js</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>\u5982\u679C\u9700\u8981\u6253\u5305\u5165\u53E3\u91CC\u9762\u6CE8\u5165\u6253\u5165\uFF0C\u4E5F\u53EF\u4EE5\u8FD9\u6837\u52A0:</p><div class="language-javascript line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki"><code><span class="line"><span style="color:#89DDFF;">import</span><span style="color:#A6ACCD;"> babel</span><span style="color:#89DDFF;">,{</span><span style="color:#A6ACCD;">getBabelOutputPlugin</span><span style="color:#89DDFF;">}</span><span style="color:#89DDFF;">from</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">@rollup/plugin-babel</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">import</span><span style="color:#A6ACCD;"> resolve </span><span style="color:#89DDFF;">from</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">@rollup/plugin-node-resolve</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> config </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">input</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> [</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">src/babeltest.js</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">src/babeltest2.js</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">core-js/stable</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">regenerator-runtime/runtime</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">]</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#89DDFF;">...</span></span>
<span class="line"><span style="color:#A6ACCD;">]</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span></span>
<span class="line"><span style="color:#89DDFF;">};</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">export</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">default</span><span style="color:#A6ACCD;"> config</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><h5 id="_2-4-3-\u5F15\u5165-babel-plugin-transform-runtime" tabindex="-1">2.4.3 \u5F15\u5165 @babel/plugin-transform-runtime <a class="header-anchor" href="#_2-4-3-\u5F15\u5165-babel-plugin-transform-runtime" aria-hidden="true">#</a></h5><ul><li>\u6211\u4EEC\u5148\u770B\u4E00\u4E0B\u4E4B\u524D\u6253\u5305\u524D\u540E\u7684\u6587\u4EF6\uFF1A</li></ul><table><thead><tr><th>\u6253\u5305\u524D</th><th>\u6253\u5305\u540E</th></tr></thead><tbody><tr><td><img src="`+D+'" alt="image-20221209213737053" style="zoom:50%;"></td><td><img src="'+y+`" alt="image-20221209213816182" style="zoom:50%;"></td></tr></tbody></table><ul><li>\u4F1A\u5B58\u5728\u4E24\u4E2A\u95EE\u9898</li></ul><p>1: \u5728\u6211\u4EEC\u6B63\u5E38\u7684\u524D\u7AEF\u5DE5\u7A0B\u5F00\u53D1\u7684\u65F6\u5019\uFF0C\u5C11\u5219\u51E0\u5341\u4E2Ajs\u6587\u4EF6\uFF0C\u591A\u5219\u4E0A\u5343\u4E2A\u3002\u5982\u679C\u6BCF\u4E2A\u6587\u4EF6\u91CC\u90FD\u4F7F\u7528\u4E86class\u7C7B\u8BED\u6CD5\u6216\u8005<code>generator</code>\u8BED\u6CD5\uFF0C\u90A3\u4F1A\u5BFC\u81F4\u6BCF\u4E2A\u8F6C\u6362\u540E\u7684\u6587\u4EF6\u4E0A\u90E8\u90FD\u4F1A\u6CE8\u5165\u8FD9\u4E9B\u76F8\u540C\u7684\u51FD\u6570\u58F0\u660E\u3002\u8FD9\u4F1A\u5BFC\u81F4\u6211\u4EEC\u7528\u6784\u5EFA\u5DE5\u5177\u6253\u5305\u51FA\u6765\u7684\u5305\u975E\u5E38\u5927\u3002</p><p>2: \u5982\u679C\u4F7F\u7528<code>entry</code>\u624B\u52A8\u5BFC\u5165\uFF0C<strong>polyfill</strong> \u4F1A\u6C61\u67D3\u5168\u5C40\u53EF\u4EE5\u63A5\u53D7\uFF0C\u4F46\u662F\u4F5C\u4E3A Library \u6211\u66F4\u5E0C\u671B\u5B83\u4E0D\u4F1A\u6C61\u67D3\u5168\u5C40\u73AF\u5883**</p><ul><li><p><code>@babel/plugin-transform-runtime</code> \u63D2\u4EF6\u7528\u6765\u66FF\u6362\u5185\u8054\u8F85\u52A9\u51FD\u6570\uFF0C\u66FF\u6362\u5168\u5C40 API\uFF0C\u5F15\u5165 regeneratorRuntime \u51FD\u6570\u3002</p></li><li><p><code>@babel/runtime</code> \u5DE5\u5177\u5305\u63D0\u4F9B\u5185\u8054\u8F85\u52A9\u51FD\u6570\uFF0C\u5F15\u5165 regeneratorRuntime \u51FD\u6570\u3002</p></li><li><p><code>@babel/runtime-corejs2</code> \u5DE5\u5177\u5305\u63D0\u4F9B\u5185\u8054\u8F85\u52A9\u51FD\u6570\uFF0C\u63D0\u4F9B\u975E\u5168\u5C40\u7684 core-js2 \u7248\u672C\u7684 API\uFF0C\u5F15\u5165 regeneratorRuntime \u51FD\u6570\u3002</p></li><li><p><code>@babel/runtime-corejs3</code> \u5DE5\u5177\u5305\u63D0\u4F9B\u5185\u8054\u8F85\u52A9\u51FD\u6570\uFF0C\u63D0\u4F9B\u975E\u5168\u5C40\u7684 core-js3 \u7248\u672C\u7684 API\uFF0C\u5F15\u5165 regeneratorRuntime \u51FD\u6570\u3002</p></li></ul><blockquote><p><code>@babel/runtime</code>\u3001<code>@babel/runtime-corejs2</code>\u3001<code>@babel/runtime-corejs3</code> \u8FD9\u4E09\u4E2A\u5DE5\u5177\u5305\u662F\u7528\u6765\u914D\u5408 <code>@babel/plugin-transform-runtime</code> \u63D2\u4EF6\u4F7F\u7528\u7684\uFF0C<code>@babel/plugin-transform-runtime</code> \u63D2\u4EF6\u6839\u636E\u914D\u7F6E\u4F1A\u81EA\u52A8\u8C03\u7528\u8FD9\u4E09\u4E2A\u5DE5\u5177\u5305\u3002</p><p>@babel/runtime\u53EA\u80FD\u5904\u7406\u8BED\u6CD5\u5173\u952E\u5B57\uFF0C\u800C@babel/runtime-corejs2\u8FD8\u80FD\u5904\u7406\u65B0\u7684\u5168\u5C40\u53D8\u91CF\uFF08\u4F8B\u5982\uFF0CPromise\uFF09\u3001\u65B0\u7684\u539F\u751F\u65B9\u6CD5\uFF08\u4F8B\u5982\uFF0CString.padStart \uFF09</p><p>\u901A\u5E38\u6839\u636E\u9700\u8981\u5B89\u88C5\u5176\u4E2D\u4E00\u4E2A\u5DE5\u5177\u5305\u5373\u53EF\u3002</p></blockquote><table><thead><tr><th>corejs option</th><th>Install command</th></tr></thead><tbody><tr><td>false</td><td>npm install --save @babel/runtime</td></tr><tr><td>2</td><td>npm install --save @babel/runtime-corejs2</td></tr><tr><td>3</td><td>npm install --save @babel/runtime-corejs3</td></tr></tbody></table><blockquote><p>\u5982\u679C\u4F60\u4E0D\u9700\u8981\u5BF9core-js\u505AAPI\u8F6C\u6362\uFF0C\u90A3\u5C31\u5B89\u88C5@babel/runtime\u5E76\u628Acorejs\u914D\u7F6E\u9879\u8BBE\u7F6E\u4E3Afalse\u5373\u53EF\u3002</p><p>\u5982\u679C\u4F60\u9700\u8981\u7528core-js2\u505AAPI\u8F6C\u6362\uFF0C\u90A3\u5C31\u5B89\u88C5@babel/runtime-corejs2\u5E76\u628Acorejs\u914D\u7F6E\u9879\u8BBE\u7F6E\u4E3A2\u5373\u53EF\u3002</p><p>\u5982\u679C\u4F60\u9700\u8981\u7528core-js3\u505AAPI\u8F6C\u6362\uFF0C\u90A3\u5C31\u5B89\u88C5@babel/runtime-corejs3\u5E76\u628Acorejs\u914D\u7F6E\u9879\u8BBE\u7F6E\u4E3A3\u5373\u53EF\u3002</p><p>\u5728\u5B89\u88C5@babel/preset-env\u7684\u65F6\u5019\uFF0C\u5176\u5B9E\u5DF2\u7ECF\u81EA\u52A8\u5B89\u88C5\u4E86@babel/runtime\uFF0C\u5982\u679C\u6709\u9700\u8981\uFF0C\u6211\u4EEC\u5EFA\u8BAE\u8FD8\u662F\u624B\u52A8\u5728\u5B89\u88C5\u4E00\u6B21</p></blockquote><ul><li><p>\u5B89\u88C5\u4F9D\u8D56</p><div class="language-shell line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki"><code><span class="line"><span style="color:#A6ACCD;">  pnpm install --save @babel/runtime @babel/runtime-corejs3</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><div class="language-shell line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki"><code><span class="line"><span style="color:#A6ACCD;">  pnpm install --save-dev  @babel/plugin-transform-runtime</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>\u914D\u7F6E<code>rollup.babel.config.mjs</code></p><div class="language-javascript line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki"><code><span class="line"><span style="color:#676E95;">//rollup.babel.config.mjs</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">import</span><span style="color:#A6ACCD;"> babel</span><span style="color:#89DDFF;">,{</span><span style="color:#A6ACCD;">getBabelOutputPlugin</span><span style="color:#89DDFF;">}</span><span style="color:#89DDFF;">from</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">@rollup/plugin-babel</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">import</span><span style="color:#A6ACCD;"> resolve </span><span style="color:#89DDFF;">from</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">@rollup/plugin-node-resolve</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> config </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">input</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> [</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">src/babeltest.js</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">src/babeltest2.js</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">]</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">output</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">dir</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">output</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">format</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">es</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#89DDFF;">     </span><span style="color:#676E95;">//\u662F\u5426\u5F00\u542Fsoucemap</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">sourcemap</span><span style="color:#89DDFF;">:</span><span style="color:#FF9CAC;">true</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">},</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">plugins</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> [</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#82AAFF;">resolve</span><span style="color:#A6ACCD;">()</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#82AAFF;">babel</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">{</span><span style="color:#A6ACCD;"> </span><span style="color:#F07178;">babelHelpers</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">bundled</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#82AAFF;">getBabelOutputPlugin</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">        </span><span style="color:#676E95;">// modules \u8BBE\u7F6E\u4E3A false\uFF0C\u5426\u5219 Babel \u5C06\u5728 Rollup \u6709\u673A\u4F1A\u6267\u884C\u5176\u64CD\u4F5C\u4E4B\u524D\u5C06\u6211\u4EEC\u7684\u6A21\u5757\u8F6C\u6362\u4E3A CommonJS </span></span>
<span class="line"><span style="color:#89DDFF;">        </span><span style="color:#676E95;">//\u8FD9\u4E2A\u53C2\u6570\u9879\u7684\u53D6\u503C\u53EF\u4EE5\u662F&quot;amd&quot;\u3001&quot;umd&quot; \u3001 &quot;systemjs&quot; \u3001 &quot;commonjs&quot; \u3001&quot;cjs&quot; \u3001&quot;auto&quot; \u3001false\u3002\u5728\u4E0D\u8BBE\u7F6E\u7684\u65F6\u5019\uFF0C\u53D6\u9ED8\u8BA4\u503C&quot;auto&quot;\u3002</span></span>
<span class="line"><span style="color:#89DDFF;">        </span><span style="color:#676E95;">//\u5982\u679C\u6211\u4EEC\u5C06\u53C2\u6570\u9879\u6539\u6210false\uFF0C\u90A3\u4E48\u5C31\u4E0D\u4F1A\u5BF9ES6\u6A21\u5757\u5316\u8FDB\u884C\u66F4\u6539\uFF0C\u8FD8\u662F\u4F7F\u7528import\u5F15\u5165\u6A21\u5757\u3002</span></span>
<span class="line"><span style="color:#89DDFF;">       </span><span style="color:#676E95;">// \u4F7F\u7528ES6\u6A21\u5757\u5316\u8BED\u6CD5\u6709\u4EC0\u4E48\u597D\u5904\u5462\u3002\u5728\u4F7F\u7528Webpack\u4E00\u7C7B\u7684\u6253\u5305\u5DE5\u5177\uFF0C\u53EF\u4EE5\u8FDB\u884C\u9759\u6001\u5206\u6790\uFF0C\u4ECE\u800C\u53EF\u4EE5\u505Atree shaking \u7B49\u4F18\u5316\u63AA\u65BD\u3002</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#F07178;">presets</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> [[</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">@babel/preset-env</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">&quot;</span><span style="color:#F07178;">modules</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FF9CAC;">false</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span></span>
<span class="line"><span style="color:#89DDFF;">        </span><span style="color:#676E95;">// usage: \u4F1A\u6839\u636E\u7528\u6237\u4EE3\u7801\u7684\u4F7F\u7528\u60C5\u51B5\uFF0C\u5E76\u6839\u636E targets \u81EA\u884C\u6CE8\u5165\u76F8\u5173 polyfills\u3002</span></span>
<span class="line"><span style="color:#89DDFF;">        </span><span style="color:#676E95;">//\u4F7F\u7528@babel/plugin-transform-runtime\uFF0C\u8FD9\u4E2A\u5C31\u53EF\u4EE5\u4E3Afalse\u4E86\u3002</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">&quot;</span><span style="color:#F07178;">useBuiltIns</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#FF9CAC;">false</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#89DDFF;">        </span><span style="color:#676E95;">//\u7528 corejs-3\uFF0C\u5F00\u542F proposals: true\uFF0Cproposals \u4E3A\u771F\u90A3\u6837\u6211\u4EEC\u5C31\u53EF\u4EE5\u4F7F\u7528 proposals \u9636\u6BB5\u7684 API \u4E86</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">&quot;</span><span style="color:#F07178;">corejs</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">          </span><span style="color:#89DDFF;">&quot;</span><span style="color:#F07178;">version</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">3</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">          </span><span style="color:#89DDFF;">&quot;</span><span style="color:#F07178;">proposals</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FF9CAC;">true</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">        </span><span style="color:#676E95;">//targets\uFF0C\u914D\u7F6E\u9700\u8981\u517C\u5BB9\u6D4F\u89C8\u5668\u8303\u56F4,\u6BD4\u5982chrome 60\u5DF2\u7ECF\u652F\u6301es6\u4E86\uFF0C\u5982\u679C\u914D\u7F6E\u4E86\uFF0C\u5219\u4E0D\u4F1A\u5C06\u6211\u4EEC\u7684es6\u8BED\u6CD5\u8F6C\u6362\u6210es5\u4E86\u3002</span></span>
<span class="line"><span style="color:#89DDFF;">        </span><span style="color:#676E95;">// targets: {</span></span>
<span class="line"><span style="color:#89DDFF;">        </span><span style="color:#676E95;">//     &quot;chrome&quot;: &quot;60&quot;</span></span>
<span class="line"><span style="color:#89DDFF;">        </span><span style="color:#676E95;">//   }</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#A6ACCD;">        ]]</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#F07178;">plugins</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> [</span></span>
<span class="line"><span style="color:#A6ACCD;">          [</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">@babel/plugin-transform-runtime</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">            </span><span style="color:#676E95;">//\u662F\u7528\u6765\u8BBE\u7F6E\u662F\u5426\u8981\u81EA\u52A8\u5F15\u5165\u8F85\u52A9\u51FD\u6570\u5305\uFF0C\u8FD9\u4E2A\u6211\u4EEC\u5F53\u7136\u8981\u5F15\u5165\u4E86,\u9ED8\u8BA4true</span></span>
<span class="line"><span style="color:#A6ACCD;">            </span><span style="color:#F07178;">helpers</span><span style="color:#89DDFF;">:</span><span style="color:#FF9CAC;">true</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#89DDFF;">            </span><span style="color:#676E95;">//corejs\u53D6\u503C\u662Ffalse\u30012\u548C3,\u9ED8\u8BA4false</span></span>
<span class="line"><span style="color:#89DDFF;">            </span><span style="color:#676E95;">//\u524D\u7AEF\u4E1A\u52A1\u9879\u76EE\u91CC\uFF0C\u6211\u4EEC\u4E00\u822C\u5BF9corejs\u53D6false\uFF0C\u5373\u4E0D\u5BF9Promise\u8FD9\u4E00\u7C7B\u7684API\u8FDB\u884C\u8F6C\u6362\u3002\u800C\u5728\u5F00\u53D1JS\u5E93\u7684\u65F6\u5019\u8BBE\u7F6E\u4E3A2\u62163\uFF0C\u4E5F\u53EF\u4EE5\u8FD9\u6837\u5199&quot;corejs&quot;: { &quot;version&quot;: 3,  &quot;proposals&quot;: true}</span></span>
<span class="line"><span style="color:#A6ACCD;">            </span><span style="color:#89DDFF;">&quot;</span><span style="color:#F07178;">corejs</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#F78C6C;">3</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#89DDFF;">            </span><span style="color:#676E95;">//\u8BE5\u9879\u7528\u6765\u8BBE\u7F6E\u662F\u5426\u4F7F\u7528ES6\u7684\u6A21\u5757\u5316\u7528\u6CD5\uFF0C\u53D6\u503C\u662F\u5E03\u5C14\u503C\u3002\u9ED8\u8BA4\u662Ffasle\uFF0C\u5728\u7528webpack\u4E00\u7C7B\u7684\u6253\u5305\u5DE5\u5177\u7684\u65F6\u5019\uFF0C\u6211\u4EEC\u53EF\u4EE5\u8BBE\u7F6E\u4E3Atrue\uFF0C\u4EE5\u4FBF\u505A\u9759\u6001\u5206\u6790\u3002</span></span>
<span class="line"><span style="color:#A6ACCD;">            </span><span style="color:#F07178;">useESModules</span><span style="color:#89DDFF;">:</span><span style="color:#FF9CAC;">true</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#89DDFF;">            </span><span style="color:#676E95;">//\u9ED8\u8BA4true\uFF0C\u53EF\u4EE5\u81EA\u52A8\u6309\u9700\u5F15\u5165\u975E\u5168\u5C40 regeneratorRuntime \u51FD\u6570\u3002</span></span>
<span class="line"><span style="color:#A6ACCD;">            </span><span style="color:#F07178;">regenerator</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FF9CAC;">true</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#89DDFF;">            </span><span style="color:#676E95;">//\u9ED8\u8BA4 @babel/runtime@7.0.0 is installed.</span></span>
<span class="line"><span style="color:#89DDFF;">            </span><span style="color:#676E95;">//\u6BD4\u5982\u8BE5\u4F8B\u5B50\u4E2D\u6211\u4EEC@babel/runtime-corejs3 ^7.20.6\uFF0C\u53EF\u4EE5\u8BBE\u7F6E\u4E3A^7.20.6\uFF0C\u4EE5\u51CF\u5C11\u6253\u5305\u4F53\u79EF</span></span>
<span class="line"><span style="color:#A6ACCD;">            </span><span style="color:#89DDFF;">&quot;</span><span style="color:#F07178;">version</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">^7.20.6</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#A6ACCD;">          </span><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;">]</span></span>
<span class="line"><span style="color:#A6ACCD;">        ]</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span></span>
<span class="line"><span style="color:#A6ACCD;">]</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span></span>
<span class="line"><span style="color:#89DDFF;">};</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">export</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">default</span><span style="color:#A6ACCD;"> config</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br></div></div></li></ul><p><a href="https://www.babeljs.cn/docs/babel-runtime" target="_blank" rel="noreferrer">@babel/runtime</a></p><p><a href="https://babeljs.io/docs/en/babel-plugin-transform-runtime" target="_blank" rel="noreferrer">@babel/plugin-transform-runtime</a></p><p>\u6211\u4EEC\u5BF9Babel\u505A\u4E86\u4E00\u4E2A\u57FA\u672C\u7684\u4E86\u89E3\u3002</p><p>\u8FD9\u91CC\u6211\u53C2\u8003\u4E86\u4EE5\u4E0B\u8D44\u6599\uFF0C\u5982\u679C\u4E86\u89E3\u66F4\u591A\uFF0C\u4E5F\u53EF\u4EE5\u81EA\u884C\u7FFB\u9605\uFF1A</p><p><a href="https://babeljs.io/docs/en/" target="_blank" rel="noreferrer">Babel\u5B98\u7F51</a></p><p><a href="https://www.jiangruitao.com/babel/" target="_blank" rel="noreferrer">Babel \u6559\u7A0B</a></p><p><a href="https://zhuanlan.zhihu.com/p/361874935" target="_blank" rel="noreferrer">\u5403\u4E00\u5811\u957F\u4E00\u667A\u7CFB\u5217: 99% \u5F00\u53D1\u8005\u6CA1\u5F04\u660E\u767D\u7684 babel \u77E5\u8BC6</a></p><h3 id="\u4E09\u3001\u540E\u7EED\u8BA1\u5212" tabindex="-1">\u4E09\u3001\u540E\u7EED\u8BA1\u5212 <a class="header-anchor" href="#\u4E09\u3001\u540E\u7EED\u8BA1\u5212" aria-hidden="true">#</a></h3><ul><li>\u4F7F\u7528rollup \u5B8C\u6210\u4E00\u4E2A\u7EC4\u4EF6\u642D\u5EFA</li><li>\u7EE7\u7EED\u5B66\u4E60\u53E6\u5916\u7684\u6253\u5305\u5DE5\u5177<a href="https://webpack.docschina.org/concepts/" target="_blank" rel="noreferrer">webpack</a>,<a href="https://vitejs.dev/" target="_blank" rel="noreferrer">vite</a></li><li>\u6700\u540E\u4E86\u89E3\u548C\u5B66\u4E60\u5404\u4E2A\u6253\u5305\u5DE5\u5177\u7684\u6E90\u7801</li></ul><p>\u5B8C\u6574\u7684rollup\u914D\u7F6E\u548C\u4F7F\u7528\u53EF\u4EE5\u53C2\u8003\uFF1A</p><p><a href="https://www.rollupjs.com/" target="_blank" rel="noreferrer"><strong>rollup.js \u4E2D\u6587\u6587\u6863</strong></a></p>`,143),C=[i];function b(u,A,m,d,g,v){return a(),n("div",null,C)}const f=s(F,[["render",b]]);export{E as __pageData,f as default};
